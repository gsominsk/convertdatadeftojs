global
updating function LongInt CUVcRecordUpdate(var record CUVc CUr,record CUVc CU2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  
  res = inner.CUVcRecordUpdate(CUr,CU2r,stat,long4);
  if (CUr.Salutation2!=CU2r.Salutation2) or (CUr.Salutation3!=CU2r.Salutation3) then begin 
    CUr.Name = CUr.Salutation3;
    if nonblank(CUr.Salutation2) then begin 
      if nonblank(CUr.Name) then begin 
        CUr.Name = CUr.Name & ", ";
      end;
      CUr.Name = CUr.Name & CUr.Salutation2;
    end;
  end;
  CUVcRecordUpdate = res;
  RETURN;
END;


global
updating function LongInt CUVcRecordSave(var record CUVc CUr,record CUVc CU2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;

  res = inner.CUVcRecordSave(CUr,CU2r,stat,long4);
  if blank(CUr.Name) then begin 
    CUr.Name = Left(CUr.Salutation3,Len(CUr.Salutation3));
    if nonblank(CUr.Salutation2) then begin 
      if nonblank(CUr.Name) then begin 
        CUr.Name = CUr.Name & ", ";
      end;
      CUr.Name = CUr.Name & CUr.Salutation2;
    end;
  end;
  CUVcRecordSave = res;
  RETURN;
END;