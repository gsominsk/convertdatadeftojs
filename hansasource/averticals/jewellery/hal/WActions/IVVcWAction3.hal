external inner function Boolean TouchScreenLook();

global
function Boolean IVDClassActiveFieldOnNew(Integer wn)
begin
  Boolean res;
  record CashierDefBlock CDb;
  record IVVc IVr;

  GetWindowRecord(wn,IVr);
  BlockLoad(CDb);
  switch (CDb.DefInvoiceField) begin
    case 0:
      if (TouchScreenLook) then begin
        if (nonblank(IVr.CustCode)) then begin
          WindowFieldGoto(wn,IVr,0,"SerialNr",true);
          res = true;
        end;
      end;
    case 1:
      WindowFieldGoto(wn,IVr,0,"ArtCode",true);
      res = true;
    case 2:
      WindowFieldGoto(wn,IVr,0,"SerialNr",true);
      res = true;
  end;
  IVDClassActiveFieldOnNew = res;
  return;
end;
