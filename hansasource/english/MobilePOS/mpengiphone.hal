/* mpengiphone.hal */

begin
  real h,h1,hl,h2,h3,h4,h5,h6,h7,hs,v,vm,l,vs,vs2,f,v2,t,es,hm,hof,fs;
  string 255 label;
  
  SetLangMode(LangEnglish,"IPENG",0);

  WindowBegin("Connect",ServerAddressTClass,CGSbl,-);
  SetBlid(LocalLoginOptBlock);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  
  StringList(1,1,-16,-1);
  EndWindow;
  
  WindowBegin("Connect",DemoServerAddressTClass,CGSbl,-);
  SetBlid(LocalLoginOptBlock);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);

  StringList(1,1,-16,-1);
  EndWindow;

  WindowBegin("Connect",Server2AddressTClass,CGSbl,-);
  SetBlid(LocalLoginOptBlock);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  h = 20; v = 6; vs = 38; vs2 = 18;

  EditField(h,v+=20,280,"Hostname or IP",Normal,ServerIP,false,0);
  EditField(h,v+=vs,280,"Port",Normal,ServerPort,false,0);
  HalPushButton(h,v+=(vs+2),h+100,v+30,"ServerAddressConnect","Connect");
  ControlLabel(0,0,0,0,"Connect","SystemFont",17,kTextStyleBold,AdjCenter,patM4ReportsTextBlue);
  v = v+vs;
  StaticText(20,v+=24,"Please enter IP/Hostname and Port for the",false);
  StaticText(60,v+=vs2,"server you want to connect to",false);

  EndWindow;

  WindowBegin("Master Control",iPhoneMasterWClass,CGother,RcType);
  WindowTitleSuperscript("Mobile POS");
  UseView(RcVc);
  es = 6;
  SetWRect(0,0,320,418);
  hm = 47; h2 = 76; v=40; vs = 80;
  h = hm;
  AddBic(1058,1059,h=h,v,ToolDemoPOS,0,"Sell"); // Queue Buster
  AddBic(1062,1063,h+=h2,v,ToolReport,0,"Report");
  AddBic(1060,1061,h+=h2,v,ToolModule,0,"Module");
  h = hm; v=v+vs;
  //AddBic(1058,1059,h=hm,v,ToolProjects,0,"Projects");
  //AddBic(1058,1059,h+=h2,v,ToolExpenses,0,"Expenses");
  //AddBic(0,0,h+=h2,v,Tool,0,"");
  h = hm; v=v+vs;
  //AddBic(0,0,h=hm,v,Tool,0,"");
  //AddBic(0,0,h+=h2,v,Tool,0,"");
  //AddBic(0,0,h+=h2,v,Tool,0,"");
  h = hm; v=v+vs;
  //AddBic(0,0,h=hm,v,Tool,0,"");
  //AddBic(0,0,h+=h2,v,Tool,0,"");
  //AddBic(0,0,h+=h2,v,Tool,0,"");
  
  //BlackFrame(15,v,312,1,"Module:$",kFrameShadeNone);
  //SpecMenuItem("Stop automatic login",' ',20);
  EndWindow;


  WindowBegin("iPhone",iPhoneBgWClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(120,80,120+320+20,80+480+80);
  h = 170;
  v = -45;
  AddBic(7703,7703,h,v,ToolClose,0,"");
  EndWindow;


  WindowBegin("Routines",RoutinesWClass,CGother,RcType);
  UseView(RcVc);
  es = 6;
  SetWRect(20,90,630,479+11*es);
  hm = 40; v=41; h2 = 80;
  AddBic(805,806,h=hm,v,ToolLogin,0, "Login");
  AddBic(737,738,h+=h2,v,ToolSetup,0, "Settings");
  AddBic(718,750,h+=h2,v,ToolDocument,0,"Documents");
  h = hm; v=v+73;
  AddBic(632,730,h,v,ToolExport,0,  "Exports");
  AddBic(632,730,h+=h2,v,ToolImport,0,  "Imports");
  AddBic(633,733,h+=h2,v,ToolMaintenance,0,"Maintenance");
  h = hm; v=v+73;
  AddBic(635,735,h,v,ToolResources,0,"Resources");
  AddBic(636,736,h+=h2,v,ToolChat,0,"Chat");
  AddBic(807,807,h+=h2,v,ToolAbout,0,"About");
  EndWindow;


  WindowBegin("Registers",RegsWClass,CGother,RcType);
  SetWRect(357,104,620,402);
  Sizeable(-1,-1,0,0);
  StringList(10,10,-40,-10);
  EndWindow;


  WindowBegin("",ErrorClass,CGother,-);
  SetWRect(20,262,20+468,262+68+40);
  WhiteBackground;
  Modality(1);
  WType(1);
  AddBic(1031,1032,30,84,ToolHelp,0,"");
  PushButton(400,82,460,102,0,"OK");
  EndWindow;


  WindowBegin("",RepWClass,CGRepW,RcType);
  SetWRect(20,80,620,550);
  Sizeable(150,150,0,0);

//  ToolBar;
//  AddBic(603,604,200,20,ToolAttach,0,"");
//  EndToolBar;

  UseView(RcVc);
  WhiteBackground;
  //iPhoneTopBar;
  ScrollBar(-17,40,-1,-17);
//    SearchField("Search");
//    ToolBar;
//    EditFieldTL(-225,6,135,"",M4Str,Normal,20,searchstr,false,0);
//    PushButton(-70,5,-10,22,ToolOK,"Search");
//    EndToolBar;
// Why go back to C? Is there a problem when using Report Generator, or?
  SpecMenuItem("Recalculate",'r',0);
  SpecMenuItem("Recalculate and Print",'p',1);
  SpecMenuItem("Reopen Report Specification",' ',2);

//  SpecialMenu("Recalculate",'r',0,"RecalculateRepWsm");
//  SpecialMenu("Recalculate and Print",'p',1,"RecalculatePrintRepWsm");
//  SpecialMenu("Reopen Report Specification",' ',2,"ReopenRepWsm");
  EndWindow;


  WindowBegin("Please Confirm",YesNoCancelWClass,CGother,RcType);
  Modality(1);
  UseView(RcVc);
  SetWRect(80,200,400,300);
  Sizeable(-1,-1,0,0);
  h = 20; v= 50;
  PushButton(h,v,h+80,v+20,1,"Yes");
  PushButton(h,v+=40,h+80,v+20,4,"No");
  PushButton(h,v+=40,h+80,v+20,2,"Cancel");
  EndWindow;
  
  WindowBegin("File Sharing",ConferenceWClass,CGother,RcType);
  SetWRect(20,80,500,440);
  Sizeable(447,100,0,0);
  MailBackground;
//  ToolBar;
    // EditFieldTL(-225,6,135,"",M4Str,Normal,20,searchstr,false,0);
  h = 34;
//    HalPushButton(h,5,h+80,25,"ConferenceWToolProperties","Properties");
    // PushButton has weird code, where bottom = top + 20 and on
    // all other platmforms then MAC OSX boxes have different sizes
    h = h+92;
//    PushButton(h,5,h+80,25,ToolPresentation,"Presentation");
//  EndToolBar;
  v = 16;
    // SetM4Rect(rtp,9,21,-22,-20);
//  IconList(9,21,-7,-20,0,"");
  IconList(9,0,-7,-20,0,"");
    // SpecMenuItem("Properties",' ',0);
    // SpecMenuItem("Presentation",' ',1);
//  FunctionButton(1,"Open","",ToolOK);
//  FunctionButton(2,"New","",ToolNew);
//  FunctionButton(4,"Close","",ToolClose);
  EndWindow;

  WindowBegin("Archive",ArchiveWClass,CGother,RcType);
  UseView(RcVc);
  CloseOnCancel;
  SetWRect(130,80,470,320);
  Sizeable(100,100,0,0);
//  StringList(9,9+13,-23,-20);
  ScrollBar(-23,9+12+1,-7,-19);
//  MailBackground;
//  PushButton(-80,2,-30,19,ToolOpenAttachment,"Open");  
  SpecMenuItem("Attach File",'a',0);
  SpecMenuItem("Download File",' ',1);
  SpecMenuItem("Open Record",' ',2);
  SpecialMenu("Show To Links",' ',3,"ShowToLinksArchiveWsm");
  SpecMenuItem("Edit Link Comment",' ',4);
  SpecialMenu("(-",' ',5,"");
  SpecialMenu("Create Note",' ',6,"NoteFromArchiveWsm");
  SpecialMenu("Create Mail",' ',7,"MailFromArchiveWsm");
  SpecialMenu("Create Archive",' ',8,"ArchiveFromArchiveWsm");
  SpecMenuItem("Rename Archive",'r',9);
//  SpecialMenu("Create Action",' ',8,"ActionFromArchiveWsm"); // No clue what it is for.
  EndWindow;
  
  WindowBegin("Settings",SetupClass,CGother,RcType); //?? RcType, used to be HBlRecType
  SetWRect(357,104,620,406);
  Sizeable(-1,-1,0,0);
  StringList(20,20,-40,-20);
  SpecialMenu("Personal Settings",' ',0,"OpenUS2Sm");
  EndWindow;
  
  WindowBegin("Select Module",ModWClass,CGother,HBlRecType);
  SetWRect(0,0,320,480);
  Sizeable(-1,-1,0,0);
  iPhoneTopBar;
  iPhoneFilterBar;
  StringList(1,1,-16,-16);
  EndWindow;
  
  WindowBegin("SmartApps",SmartAppsWClass,CGother,HBlRecType);
  SetWRect(357,104,620,406);
  Sizeable(-1,-1,0,0);
  StringList(20,20,-40,-20);
  EndWindow;
  
  WindowBegin("Reports",RsWClass,CGother,RcType);
  SetWRect(0,0,320,418);
  //SetWRect(0,0,320,460);
  CloseOnCancel;
  Sizeable(-1,-1,0,0);
  iPhoneTopBar;
  iPhoneFilterBar;
  StringList(0,44,-16,-1);
  //StringList(1,v+=24,-16,-1);
//  IconList(20,20,-40,-20,0,"");
//  SpecMenuItem("Screen",' ',0);
//  SpecMenuItem("Printer",' ',1);
//  SpecMenuItem("Print Queue",' ',2);
//  SpecMenuItem("File",' ',3);
//  SpecMenuItem("Clipboard",' ',4);
//  SpecialMenu("(-",' ',5,"");
//  SpecMenuItem("Fax",' ',5);
//  SpecMenuItem("Printer Dialog",' ',6);
//  SpecialMenu("(-",' ',7,"");
//  SpecMenuItem("Define Report",' ',8);
//  SpecMenuItem("Remove Page Setup",' ',9);
//  SpecMenuItem("Select Printer",' ',10); // mac only?
  EndWindow;


  WindowBegin("Exports",EsWClass,CGother,RcType);
  SetWRect(357,104,620,406);
  Sizeable(-1,-1,0,0);
  StringList(20,20,-40,-20);
  EndWindow;


  WindowBegin("Imports",IsWClass,CGother,RcType);
  SetWRect(357,104,620,406);
  Sizeable(-1,-1,0,0);
  StringList(20,20,-40,-20);
  EndWindow;


  WindowBegin("Maintenance",MsWClass,CGother,RcType);
  SetWRect(357,104,620,406);
  Sizeable(-1,-1,0,0);
  StringList(20,20,-40,-20);
  EndWindow;
  
  WindowBegin("Select",RadioSClass,CGother,HBlRecType);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  ValuePicker(0,40,320,240);
  EndWindow;
  
  WindowBegin("Login",LoginClass,CGother,USRowType);
  UseView(USRowVc);
  h2 = 464; v2 = 250;
  SetWRect(80,90,h2,v2);
  Modality(1);
  v = 6; vs = 38; h = 85; h2 = 320;
  //StaticText(h,50,"$programversionname",false); //Do not translate
  //StaticText(h,v+8,"$companyname",false); //Do not translate
  //StaticText(35,v+10,"Enter these fields to login:",false);
  v = 120;
  EditFieldTL(h,v,     150,"Signature",   M4Code,Normal,60,Name,false,0);
  EditFieldTL(h,v+=vs, 150,"Password",   M4Star,Normal,20,Password,false,0);
  vm = v+30;
  v = v+50;
  h = -100;
  PushButton(h,v,h+80,v+20,ToolQuit,"Quit");
  h=h-110;
  PushButton(h,v,h+100,v+20,ToolRestore,"Select Company");
  h=h-90;
  PushButton(h,v,h+80,v+20,ToolOK,"Login");

  StaticText(22,v+=100,"$demo1",false); //Do not translate
  StaticText(102,v+=15,"$demo2",false); //Do not translate
//  BottomBar;
//  PushButton(10,v,20,v+20,ToolQuit,"Quit");
  //h=h-90; PushButton(h,v,h+80,v+20,ToolRestore,"Cancel");
//  FlexibleSpace;
//  PushButton(-20,v,-10,v+20,ToolOK,"Login");
  EndWindow;

  WindowBegin("Login",Login2Class,CGother,USRowType);
  UseView(USRowVc);
  h2 = 464; v2 = 250;
  SetWRect(80,90,h2,v2);
  Modality(1);
  v = 6; vs = 38; h = 120; h2 = 320;
  v = v+35;
  StaticText(20,v+10,"Enter to Login:",false);
  vs = 30; h = 20; h2 = 320;
  StaticText(20,(v+=15)+10,"Signature",false);
  EditFieldTL(h,v+=20, 150,"",   M4Code,Normal,60,Name,false,0);
  StaticText(20,(v+=20)+10,"Password",false);
  EditFieldTL(h,v+=20, 150,"",   M4Star,Normal,20,Password,false,0);
  v=v+40; h = 20;
  PushButton(h,v,h+60,v+20,ToolOK,"OK");
  h=h+90; PushButton(h,v,h+60,v+20,ToolRestore,"Quit");
  EndWindow;

  WindowBegin("",AboutClass,CGother,-);
  CloseOnCancel;
if (HansaWorld) then begin
  SetWRect(71,80,600,440);
end else begin
  SetWRect(71,80,500,365);
end;
  WhiteBackground;
  Modality(1);
  WType(1);
  v = -23; h = -120;
  PushButton(h,v,h+60,v+20,ToolOK,"OK");
  EndWindow;

  WindowBegin("Welcome to Mobile Reports",WelcomeWClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(240,80,520,300);
  BackgroundColour(patM4ReportsBackgroundBlue);
  h2 = 60;
  v = 50;
  hs = 200;
  vs = 40;
  StaticText(h2+15,v,"Please select an option",false);
  HalPushButton(h2,v+=20,h2+hs,v+vs-9,"DBUsageImportDemoIOS","Sample Company");
  ControlLabel(0,0,0,0,"Sample Company","SystemFont",17,kTextStyleBold,AdjCenter,patM4ReportsTextBlue);
  HalPushButton(h2,v+=vs,h2+hs,v+vs-9,"DBUsageAsClient","Remote Database");
  ControlLabel(0,0,0,0,"Remote Database","SystemFont",17,kTextStyleBold,AdjCenter,patM4ReportsTextBlue);
  EndWindow;

  WindowBegin("",ModalErrorClass,CGother,-);
  SetWRect(20,262,20+468,262+68+32);
  WhiteBackground;
  Modality(1);
  WType(1);
  h=200;v=44+32; PushButton(h,v,h+60,v+20,0,"OK");
  EndWindow;


  WindowBegin("",YesNoClass,CGother,-);
  SetWRect(20,262,20+468,327);
  Modality(1);
  WType(1);
  EndWindow;


  WindowBegin("Select Company",CompaniesSClass,CGother,RcType);
  UseView(RcVc);
//  Modality(1);
//  ToolBar;
  iPhoneTopBar;
  iPhoneFilterBar;
//  PushButton(-70,5,-10,22,ToolOK,"OK");
//  EndToolBar;
  SetWRect(240,80,520,300);
  BackgroundColour(patM4ReportsBackgroundGray);
  CheckBox(-100,55,0,"Start over with selected company",JobDf);
  StringList(0,0,-1,-1);
  BottomBar;
//  CheckBox(-0,0,0,"Start over with selected company",JobDf);
//  PushButton(10,v,20,v+20,ToolQuit,"Quit");
  EndWindow;


  WindowBegin("Documents",DsWClass,CGother,RcType);
  SetWRect(357,104,620,406);
  Sizeable(-1,-1,0,0);
  StringList(20,20,-40,-20);
  SpecMenuItem("Printer",' ',0);
//  SpecMenuItem("Print Queue",' ',1);//not working
//  SpecialMenu("(-",' ',2,"");
//  SpecMenuItem("File",' ',2);
  SpecMenuItem("Fax",' ',1);
  SpecialMenu("(-",' ',2,"");
  SpecMenuItem("Define Document",' ',3);
  SpecMenuItem("Remove Page Setup",' ',4);
  SpecMenuItem("Select Printer",' ',5);
  EndWindow;

  WindowBegin("Paste Date",DateSClass,CGother,RcType);
  UseView(RcVc);
  BrowseButtons(true);
  SetWRect(20,80,260,220);
  DatePicker(0,0,0,0);
  Sizeable(-1,-1,0,0);
  EndWindow;

  WindowBegin("Calendar - Overview",HalfYearWClass,CGother,RcType);
  UseView(RcVc);
  BrowseButtons(true);
  SetWRect(20,80,635,405);
  Sizeable(-1,-1,0,0);
  SpecialMenu("Month",'m',1,"HalfYearWClassMonth");
  SpecialMenu("Week",'w',2,"HalfYearWClassWeek");
  SpecialMenu("Day",' ',3,"HalfYearWClassDay");
  EndWindow;

  WindowBegin("Day Planner",DayWClass,CGother,RcType);
  UseView(RcVc);
  DynamicWindow;
  SetWRect(20,80,635,405);
  BrowseButtons(true);
  Sizeable(-1,-1,0,0);
//  StaticText(44,37,"",false);//Calendar is overwriting Month Name
  ScrollBar(-19,42,-3,-10);
  EndWindow;

  WindowBegin("Task Manager",ToDoWClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(20,80,320,480);
  Sizeable(-1,-1,0,0);
  vs = 38;
  v = 52;
  iPhoneTopBar;
  
  TaskManager(0,0,-1,-24); // should be one more right...
  
  BottomBar;
  
  EndWindow;

// this pocket window need a new design as well
  WindowBegin("Activity",ActDClass,CGview,ActView);
  SetWRect(0,0,320,480);
  BrowseButtons(false);
  Sizeable(-1,-1,0,0);
  UseView(ActVc);
  FormName(ActDocForm);
  v = 6; vs = 33; h = 6; h3 = 156; h2 = 130; fs = -20;
//  CommunicateButton;
//  Tile(0,70,false,"",Comment);
//  EditField(h,v=6,-20,"Text",Normal,Comment,false,0);
  EditField(h,v=16,-20,"Text",Normal,Comment,false,0);
  EditField(h,v+=vs,h2,"Type",Normal,ActType,false,ActTypeSClass);
  CheckBox(-110,v+2,0,"Done",OKFlag);
  EditField(h,v+=vs,h2,"Time",Normal,StartTime,false,PasteCurTime);
  EditField(h3,v,-20,"Date",Normal,TransDate,false,PasteCurDate);
  EditField(h,v+=vs,-20,"Priority",Normal,PrioLevel,false,0);
  EditField(h,v+=vs,-20,"Persons",Normal,MainPersons,false,UserSClass);
  MatrixBegin(4,v+=vs,-1,-1,ActRowType,199);
  MatCol(1,24,"Code",0,TextCode,false,TextTypeSClass);
  MatCol( 1,84,"Text",0,Text,false,0);
  //  MatColMLT(1,84,"Text",0,Text,false,0);
  EndMatrix;
/*  vm = v;
  TileButton(1,"1");
  TileButton(2,"2");
  TileButton(3,"3");
  TileButton(4,"4");
  TileButton(5,"5");
  TileButton(6,"6");
  TileButton(7,"7");
  TileButton(8,"8");
  TileButton(9,"9");
  v = vm;
  CheckBox(-70,v,0,"D_one",OKFlag);
  Tile(1,110,false,"1",StartTime);
  EditField(h,v=6,60,"Start Time",Normal,StartTime,false,PasteCurTime);
  EditField(h,v+=vs,60,"End Time",Normal,EndTime,false,PasteCurTime);
  EditField(h,v+=vs,60,"Cost (Time)",Normal,CostTime,false,PasteCurTime);
  EditField(h,v+=vs ,80,"Start Date",Normal,TransDate,false,PasteCurDate);
  EditField(h,v+=vs,80,"End Date",Normal,EndDate,false,PasteCurDate);
  Tile(2,160,false,"2",-);
  v = 18;
  h3 = 40;
  ButtonFrame(h3,vm=v,120,3,"Task Type");
  RadioButton(h3,v,0,0,"Calendar",TodoFlag);
  RadioButton(h3,v+=16,1,0,"To _Do",TodoFlag);
  RadioButton(h3,v+=16,2,0,"Tim_ed To Do",TodoFlag);
  ButtonFrame(h3,v+=40,120,3,"Calendar");
  RadioButton(h3,v,1,0,"Time",CalTimeFlag);
  RadioButton(h3,v+=16,2,0,"Profile",CalTimeFlag);
  RadioButton(h3,v+=16,0,0,"Don't _Show",CalTimeFlag);
  Tile(3,100,false,"3",-);
  h3 = 40;
  ButtonFrame(h3,v=vm,120,4,"Alarm Type");
  RadioButton(h3,v,0,0,"None",AlarmType);
  RadioButton(h3,v+=16,1,0,"Message",AlarmType);
  RadioButton(h3,v+=16,2,0,"SMS",AlarmType);
  RadioButton(h3,v+=16,3,0,"Email",AlarmType);
  h3 = h3+160;
  ButtonFrame(h3,v=vm,120,4,"Alarm");
  RadioButton(h3,v,0,0,"Minutes",AlarmWhen);
  RadioButton(h3,v+=16,1,0,"Hours",AlarmWhen);
  RadioButton(h3,v+=16,2,0,"Days",AlarmWhen);
  EditField(h3+75,v+=vs,50,"Units before",Normal,AlarmUnits,false,0);
  Tile(4,110,false,"4",CUCode);
  EditField(h,v=6, fs,"Customer",Normal,CUCode,false,AllCUSClass);
  EnterSkip(Contact);
  EditField(h,v+=vs,fs,"Name",Normal,CUName,false,0);
  EditField(h,v+=vs,fs,"Contact",Normal,Contact,false,ContactSClass);
  EnterSkip(ActResult);
  EditField(h,v+=vs,fs,"Telephone",Normal,Phone,false,0);
  EditField(h,v+=vs,60,"Result",Normal,ActResult,false,ActTypeSClass);
  Tile(5,50,false,"5",PRCode);
  EditField(h,v=6, fs,"Project",Normal,PRCode,false,PRSClass);
  EditField(h,v+=vs,fs,"Inv. Item",Normal,ItemCode,false,INSClass);
  EditField(h,v+=vs,fs,"Resources",Normal,Resources,false,ResSClass);
  Tile(6,70,false,"6",SerialNr);
  EditField(h,v=6, fs,"Serial No.",Normal,SerialNr,false,SVOSerSClass);
  EditField(h,v+=vs,fs,"Item",Normal,ArtCode,false,INSClass);
  EditField(h,v+=vs,fs,"Serv. Order",Normal,SVOSerNr,false,SVOSClass);
  EditField(h,v+=vs,fs,"Inv. Item",Normal,ItemCode,false,INSClass);
  EnterSkip(Math);
  Tile(7,100,true,"7",Math);
  MatrixBegin(4,v=24,-32,-20,ActRowType,99);
  MatCol(1,24,"Code",0,TextCode,false,TextTypeSClass);
  MatCol(1,84,"Text",0,Text,false,0);
  EndMatrix;
  Tile(8,110,false,"8",MainPersons);
  EditField(h,v=6,-20,"Persons",Normal,MainPersons,false,UserSClass);
  EditField(h,v+=vs,-20,"Cc",Normal,CCPersons,false,UserSClass);
  EditField(h,v+=vs,80,"Supervisor",Normal,Supervisor,false,UserSClass);
  EditField(h,v+=vs ,50,"Language",Normal,LangCode,false,LangSClass);
  EditField(h,v+=vs ,20,"Priority",Normal,PrioLevel,false,0);
  CheckBox(h+40,v,0,"P_rivate",PrivateFlag);
//  SpecialMenu("Open #NL# Transaction",'t',0,"OpenTRFromAct");
  Tile(9,240,false,"9",-);
  fs = -20;*/
/*
  label = UserDefined("ActVc","UserStr1");
  if (nonblank(label)) then begin
    EditField(h,v=6 ,-20,label,Normal,UserStr1,false,0);
  end;
  label = UserDefined("ActVc","UserStr2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr2,false,0);
  end;
  label = UserDefined("ActVc","UserStr3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr3,false,0);
  end;
  label = UserDefined("ActVc","UserStr4");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr4,false,0);
  end;
  label = UserDefined("ActVc","UserStr5");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr5,false,0);
  end;
  label = UserDefined("ActVc","UserVal1");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,50,label,Normal,UserVal1,true,0);
  end;
  label = UserDefined("ActVc","UserVal2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,50,label,Normal,UserVal2,true,0);
  end;
  label = UserDefined("ActVc","UserVal3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,50,label,Normal,UserVal3,true,0);
  end;
  label = UserDefined("ActVc","UserDate1");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,80,label,Normal,UserDate1,true,PasteCurDate);
  end;
  label = UserDefined("ActVc","UserDate2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,80,label,Normal,UserDate2,true,PasteCurDate);
  end;
  label = UserDefined("ActVc","UserDate3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,80,label,Normal,UserDate3,true,PasteCurDate);
  end;
*/
/*  SpecialMenu("Create Email",'m',0,"MailFromActDsm");
  SpecialMenu("Create Letter",'l',1,"LetFromActDsm");
  if (UserCanAction("EnabINF",false)) then begin
    SpecialMenu("Enabler Information",' ',2,"EnablerInfoDsm");
  end;
  SpecialMenu("Customer Status",'e',3,"CUStatusActDsm");
  SpecialMenu("Send Invitation",' ',4,"SendInvitationDsm");
*/  
  EndWindow;


  WindowBegin("Paste Activity Type",ActTypeSClass,CGslist,-);
  SetWRect(240,80,540,298);
  Sizeable(-1,-1,0,0);
  UseView(ActTypeVc);
  SpawnClass(ActTypeDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,  "Code",Code,false,Code);
  RlColKey(51,51,"C_omment",Comment,false,Comment);
  RlColKey(-70,-75,"Class",ActTypeGr,false,ActTypeGr);
  SearchField("Search");
  EndWindow;


  WindowBegin("Calendar - Week ",WeekWClass,CGother,RcType);
  UseView(RcVc);
  BrowseButtons(true);
  SetWRect(20,80,635,405);
  Sizeable(-1,-1,0,0);
  ScrollBar(-19,42,-3,-10);
  EndWindow;


  WindowBegin("Calendar - ",MonthWClass,CGother,RcType);
  UseView(RcVc);
  BrowseButtons(true);
  SetWRect(20,80,635,405);
  Sizeable(-1,-1,0,0);
  EndWindow;


  WindowBegin("Mail",MailDClass,CGview,MailView);
  UseView(MailVc);
  SetWRect(0,0,320,418);
  BrowseButtons(false);
  Sizeable(528,-1,0,0);
  ActiveFieldOnNew("Math2");    
  MailBackground;
//  AddBic(604,609,-9,17,ToolAttach,0,"");
//  AddBic(1403,1402,-9-28,17,ToolQueueEmail,0,"");
  vs = 20; h = 85; h2 = 230; h3 = 390; h4 = 500; v = 2;
  vm = v;
//  EditField(h,v,82,"Date",ViewOnly,TransDate,false,PasteCurDate);
//  EditField(h2,v,82,"Time",ViewOnly,TransTime,false,0);
//  EditField(h3,v,82,"Lifespan",Normal,Lifespan,false,SetSClass);	
  CheckBox(-48,v=34,0,"Sent",SendFlag); // 45 or 48
//  CheckBox(-83,v=2,0,"Sent",SendFlag);
//  CheckBox(-83,v+=16,0,"Locked",LockedFlag);
//  CheckBox(-83,v+=16,0,"Priority",Priority);
//    v = vm+20;
  h1=18; h2=h1+35;
  v = 0;
//  StaticText(h-5,v+13,"Address",true);
//  MatrixBegin(0,v,-65,v+63,MailAddrRowType,99);
//  MatOverStrike(AddrStatus);
//  MatCol(1,h1,"",0,RowTyp,false,SetSClass);
//  MatCol(1,h2,"",0,AddrCode,false,ConfSClass);
//  InsertRowTest;
//  DeleteRowTest;
//  EndMatrix;
  v=v+53;
  EditField(3,v,-5,"",Normal,Header,false,0);
  v = (v+38);
  TextField(3,v,-5,-10,Math,0);
  SpecialMenu("History",'h',1,"MailHistoryMailDsm");
  SpecialMenu("Save Text as File",' ',2,"SaveAsFileMailDsm");
  SpecialMenu("Reply with Quote",' ',3,"MailReplyWithQuotesm");
  EndWindow;

  WindowBegin("Mailbox",MailLClass,CGmlist,MailView);
  SetWRect(20,80,630,290);
  SpawnClass(MailDClass);
  Sizeable(447,-1,0,0);
  MailBackground;
  UseView(MailVc);
  FormName(PrintMailL);
  v = -29;  vs = 20; l = 80;
  
//  SearchField("Search");
//  SoftEditField(60,v,80,"Folder",Normal,"folder",false,PasteFolderSClass,M4Str,40);
    
  RecordList(4,17,-21,-39);
  RlColKey(94,94,"Subject",Header,false,UserSubject);
  RlColKeyTL(-50,-50,"Address",M4AppCode,Math2,false,UserAddr);
  RevColKey(28,28,"Date",TransDate,false,UserTime);
  RevColKeyTL(6,6,"Stat.",M4AppCode,SendFlag,false,UserSer);
  RlColKeyTL(32,32,"Att.",M4AppCode,Math,false,UserSer);
  SpecialMenu("Mark as not read",'u',0,"MarknotReadMailLsm");
  SpecialMenu("History",'h',1,"MailHistoryMailLsm");
  SpecialMenu("Search",'F',2,"MailSearchLsm");
  SpecialMenu("Presentation",' ',3,"PresentationMasterWsm");
  SpecialMenu("Open Signature",' ',4,"SignatureMasterWsm");
  SpecialMenu("Open Auto Reply",' ',5,"AutoReplyMasterWsm");
  EndWindow;


  WindowBegin("Paste Contact Relations",MailContactRelSClass,CGslist,-);
  SpawnClass(ContactRelDClass);
  SetWRect(20,80,550,298);
  Sizeable(-1,-1,0,0);
  UseView(ContactRelVc);
  v = 5;  vs = 20; l = 80;
  h = 20; HalPushButton(h,v,h+l,v+vs,"SwitchToConfS","Mailboxes");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailCUS","Customers");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailVES","#Suppliers#");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailContactS","Contacts");
  RecordList(4,17+28,-21,-39);
  RlColKey(4,4,"Customer",CustCode,false,ActCustCode);
  RlColKey(84,84,"Name",CustName,false,ActCustName);
  RlColKey(204,204,"Contact",ContactCode,false,ActContactCode);
  RlColKey(284,284,"Name",ContactName,false,ActContactName);
  RlCol(-160,-160,"Start Date",StartDate,false);
  RlCol(-80,-80,"End Date",EndDate,false);
  SearchField("Search");
  EndWindow;


  WindowBegin("Paste Customer Email",MailCUSClass,CGslist,-);
  SetWRect(64,80,650,298);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  SpawnClass(CUDClass);
  v = 5;  vs = 20; l = 80;
  h = 20; HalPushButton(h,v,h+l,v+vs,"SwitchToConfS","Mailboxes");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailVES","#Suppliers#");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailContactS","Contacts");
  RecordList(4,17+28,-21,-39);
  RlColKey(4,4,"N_o.",Code,false,ActCode);
  RlColKey(96,96,"Short",SearchKey,false,ActSearchKey);
  RlColKey(145,140,"C_at",CustCat,false,ActGroup);
  RlColKey(190,190,"Name",Name,false,ActName);
  RlColKey(-100,-100,"Department",Department,false,ActDepartment);
  SearchField("Search");
  BrowseSubsetButton(-40,-15);
 // SpecMenuItem("Customer Status",'e',0);
  EndWindow;


  WindowBegin("Paste Mailbox/Conference",ConfSClass,CGslist,ConfView);
  SetWRect(64,80,600,298);
//  SpawnClass(ConfDClass);
  Sizeable(-1,-1,0,0);
  MailBackground;
  UseView(ConfVc);
  v = 5;  vs = 20; l = 80;
  h = 20; HalPushButton(h,v,h+l,v+vs,"SwitchToConfS","Mailboxes");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailCUS","Customers");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailVES","#Suppliers#");
  h=h+l+12;  HalPushButton(h,v,h+l,v+vs,"SwitchToMailContactS","Contacts");
  RecordList(4,17+28,-21,-39);
//  RecordList(4,17,-21,-39);
  RlColKey(6,6,"Name",AddrName,false,ActAddrName);
  SearchField("Search");
  SpecMenuItem("Presentation",' ',0);
  EndWindow;


  WindowBegin("Contact",CUDClass,CGview,-);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  FormName(CustRn);  
  Tile(0,67,false,"",Code);
  v = 6; h = 50; l=223; vs = 20; h2 = 320; h5 = 435; h3 = 430;
  EditField(h,v ,   95,"No.",Normal,Code,false,0);
  EditField(h,v+=vs,-35,"Name",Normal,Name,false,0);
//  HalPushButton(h,v+20,h+=110,v+40,"CUStatus","Customer Status"); 
  TileButton(1,"1");
  TileButton(2,"2");
  Tile(1,190,false,"1",InvAddr0);
  EditField(h=70,v=6,-20,"Invoice-",Normal,InvAddr0,false,0);
  EditField(h,v+=20,-20,"address",Normal,InvAddr1,false,0);
  EditField(h,v+=20,-20,"",Normal,InvAddr2,false,0);
  EditField(h,v+=20,-20,"",Normal,InvAddr3,false,0);
  EditField(h,v+=20,-20,"",Normal,InvAddr4,false,0);
  EditField(h,v+=20,-20,"Telephone",Normal,Phone,false,0);
  EditField(h,v+=20,-20,"Email",Normal,eMail,false,0);  
  EditField(h,v+=20,-20,"Contact",Normal,Person,false,ContactSClass);
  EditField(h,v+=20,-20,"#Mobile#",Normal,Mobile,false,0);
  Tile(2,190,false,"2",DelAddr0);
  EditField(h=70,v=6,-20,"Delivery",Normal,DelAddr0,false,0);
  EditField(h,v+=20,-20,"Address",Normal,DelAddr1,false,0);
  EditField(h,v+=20,-20,"",Normal,DelAddr2,false,0);
  EditField(h,v+=20,-20,"",Normal,DelAddr3,false,0);
  EditField(h,v+=20,-20,"",Normal,DelAddr4,false,0);
  EditField(h,v+=20,-20,"#VAT Reg. No.#",Normal,VATNr,false,0);
  EditField(h,v+=20,-20,"#Reg. No.#",Normal,RegNr1,false,0);
  EditField(h,v+=20,25,"#VAT Code#",Normal,VATCode,false,VATCodeSClass);
  EditField(h+80,v,-20,"#Salesman#",Normal,SalesMan,false,UserSClass);
  EditField(h,v+=20,-20,"Tags/Objects",Normal,Objects,false,ObjSClass);
  SpecialMenu("Customer Status",'e',0,"CUStatusCUDsm");
  SpecialMenu("Create Contact",' ',1,"NewContactCUDsm");
  SpecialMenu("Create Activity",'c',2,"NewActCUDsm");
  SpecialMenu("Create Random Password Mail",' ',3,"RandomPassMailCUDsm");
  EndWindow;


  WindowBegin("Contacts",CULClass,CGmlist,-);
  SpawnClass(CUDClass);
  SetWRect(20,80,660,298);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  FormName(CustRn);  
  RecordList(4,17,-21,-39);
  RlColKey(4,20,"N_o.",Code,false,Code);
  RlColKey(60,60,"Name",Name,false,Name);
  SearchField("Search");
  SpecialMenu("Customer Status",'e',0,"CUStatusCULsm");
  SpecialMenu("Change Password",' ',1,"ChangePasswdCULsm");
  EndWindow;


  WindowBegin("Paste Customer",CUSClass,CGslist,-);
  SetWRect(20,80,530,298);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  SpawnClass(CUDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,20,"N_o.",Code,false,ActCode);
  RlColKey(60,60,"Name",Name,false,ActName);
  SearchField("Search");
  SpecialMenu("Customer Status",'e',0,"CUStatusCUSsm");
  EndWindow;


  WindowBegin("Paste #Supplier#",VESClass,CGslist,-);
  SetWRect(20,80,530,298);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  SpawnClass(CUDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,20,"N_o.",Code,false,VEActCode);
  RlColKey(60,60,"Name",Name,false,VEActName);
  SearchField("Search");
  SpecialMenu("#Supplier# Status",'u',0,"VEStatusVESsm");
  EndWindow;


  WindowBegin("Paste Dealer",CUDealerSClass,CGslist,-);
  SetWRect(20,80,530,298);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  SpawnClass(CUDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,20,"N_o.",Code,false,DealerActCode);
  RlColKey(60,60,"Name",Name,false,DealerActName);
  SearchField("Search");
  SpecialMenu("Customer Status",'e',0,"CUStatusCUSsm");
  EndWindow;


  WindowBegin("Please Confirm",YesNoWClass,CGother,RcType);
  Modality(1);
  UseView(RcVc);
  SetWRect(80,200,400,300);
  Sizeable(-1,-1,0,0);
  h = 50; v = 30;
  v = -90;
  PushButton(h,v,h+80,v+20,1,"Yes");
  PushButton(h+=100,v,h+80,v+20,2,"No");
  EndWindow;

  WindowBegin("",WaitClass,CGother,-);
  SetWRect(20,262,20+468,262+68);
  WhiteBackground;
  EndWindow;

  WindowBegin("",UploadWaitClass,CGother,-);
  SetWRect(20,262,20+468,262+68);
  WhiteBackground;
  PushButton(-70,5,-10,22,ToolClose,"Cancel");
  EndWindow;
  
  WindowBegin("",WaitOrQuitClass,CGother,-);
  SetWRect(20,262,20+468,262+68);
  PushButton(335,44,395,64,ToolRestartApplication,"Restart");
  PushButton(400,44,460,64,ToolRestore,"Quit");
  WhiteBackground;
  EndWindow;

  WindowBegin("",ForceQuitClass,CGother,-);
  SetWRect(20,262,20+468,262+68);
  PushButton(335,40,395,60,ToolRestartApplication,"Restart");
  PushButton(400,40,460,60,ToolRestore,"Quit");
  WhiteBackground;
  Modality(1);
  WType(1);
  EndWindow;

  WindowBegin("#Synchronising#",SyncClass,CGother,-);
  SetWRect(20,262,20+468,262+68);
  PushButton(400,44,460,64,ToolQuit,"Quit");
  Modality(1);
  WType(1);
  EndWindow;

  WindowBegin("Chat",ChatWClass,CGRepW,RcType);
  SetWRect(20,80,620,350);
  Sizeable(150,150,0,0);
  WhiteBackground;
  ToolBar;
  hs = 26; h = 40+(5*hs + 10); v = 19;//Phone button
  AddBic(4007,4008,h,v,ToolChatSearch,0,"");
  h = h - hs;
  AddBic(4005,4006,h,v,ToolChatSave,0,"");
  h = h - hs;
  AddBic(4003,4004,h,v,ToolChatBeep,0,"");
  h = h - hs;
  AddBic(4009,4010,h,v,ToolChatWho,0,"");
  h = h - hs - 10;
  AddBic(636,736,h,v,ToolChatInvite,0,"");
  EndToolBar;
  ScrollBar(-17,40,-1,-21);
  EditFieldTL(159,-18,-21,"Enter Text",M4Str,Normal,80,f1,false,0);
  SpecMenuItem("Invite",'c',0);
  SpecialMenu("Who is in this chat?",'w',1,"ChatWhoWsm");
  SpecMenuItem("Beep Others",'G',2);
  SpecMenuItem("Save as File",' ',3);
  SpecMenuItem("Search",' ',4);
//  SpecMenuItem("Invite All",' ',1);
//  FunctionButton(1,"OK","",ToolOK);
//  FunctionButton(4,"Close","",ToolClose);
  EndWindow;

  WindowBegin("Invite To Chat",ListChatUsersClass,CGother,RcType);
  SetWRect(64,80,400,380);
  Sizeable(-1,-1,-1,0);
  SpecMenuItem("Invite",'c',0);
  StringList(10,10,300,-10);
//  FunctionButton(1,"OK","",ToolOK);
//  FunctionButton(4,"Close","",ToolClose);
  EndWindow;

  WindowBegin("Resource Type Month Overview : ",RTMonWClass,CGother,RcType);
  UseView(RcVc);
//  BrowseButtons(true);
  SetWRect(20,80,630,436);
  Sizeable(-1,-1,0,0);
  h = 83; v = 37;
  StaticText(h,v-26,"Week",true);
  StaticText(h,v-13,"Month",true);
  StaticText(h,v,"Type/Day",true);
  ScrollBar(-27,42,-11,-110);
//  EditFieldTL(120,-87,92,"Go To Date",   M4Date,Normal,0,d1,false,PasteCurDate);
//  EditFieldTL(120,-67,200,"Location",M4UStr,Normal,20,f3,false,LocationSClass);
//  EditFieldTL(120,-47,200,"Resource Types",   M4UStr,Normal,20,f1,false,ResTypeSClass);
//  EditFieldTL(120,-27,200,"Information",   M4Str,Normal,100,f2,false,0);
  h = -180; v = -50;
//  ButtonFrame(h,vm=v,150,2,"Display Mode");
//  RadioButton(h,v,0,0,            "Free",Comparison);
//  RadioButton(h,v+=16,1,0,        "Occupation %",Comparison);
//  FunctionButton(1,"Find","RTWFindReservation",0);
//  FunctionButton(2,"New","RTWNewRes",0);
//  FunctionButton(4,"Close","",ToolClose);

  if (false) then begin
  ToolBar;
  h = -110; v = 5; v2 = 25;
  HalPushButton(h,v,h+100,v+20,"RTWFindReservation","Find Reservation");
  h = h -110;
  HalPushButton(h,v,h+100,v+20,"RTWNewRes","New Reservation");
  EndToolBar;
  end;
  EndWindow;

  WindowBegin("Resource Month Overview : ",ResMonWClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(20,80,630,436);
//  SetWRect(20,80,630,396);
  SetWRect(20,80,630,436);
//  BrowseButtons(true);
  Sizeable(-1,-1,0,0);
  h = 83; v = 37;
  StaticText(h,v-26,"Week",true);
  StaticText(h,v-13,"Month",true);
  StaticText(h,v,"Resource/Day",true);
  ScrollBar(-27,42,-11,-110);
//  EditFieldTL(120,-87,92,"Go To Date",   M4Date,Normal,0,d1,false,PasteCurDate);
//  EditFieldTL(120,-67,80,"Location",M4UStr,Normal,20,f3,false,LocationSClass);
//  EditFieldTL(320,-67,80,"Resource Types",   M4UStr,Normal,20,f1,false,ResTypeSClass);
//  EditFieldTL(120,-47,80,"Item",M4UStr,Normal,20,f4,false,LocationSClass);
//  EditFieldTL(320,-47,80,"Activity Type",   M4UStr,Normal,30,f5,false,ActTypeSClass);
//  EditFieldTL(120,-27,280,"Information",   M4Str,Normal,100,f2,false,0);
// h = -180; v = -50;
  h = -180; v = -90;
//  ButtonFrame(h,vm=v,150,2,"Display");
//  RadioButton(h,v,0,0,      "Project Time only",flags[0]);
//  RadioButton(h,v+=16,1,0,  "All time",flags[0]);

//  h = -180; v = -40;
  v = v + 35;
//  ButtonFrame(h,vm=v,150,2,"Display Mode");
//  RadioButton(h,v,0,0,            "Time",Comparison);
//  RadioButton(h,v+=16,1,0,        "Profile, Time",Comparison);
    EndWindow;

  WindowBegin("Resource Day Overview : ",ResDayWClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(20,80,630,436);
  BrowseButtons(true);
  Sizeable(-1,-1,0,0);
  h = 83; v = 37;
  StaticText(h,v,"Res./Hour",true);
  ScrollBar(-27,42,-11,-81);
//  EditFieldTL(120,-87,92,"Go To Date",   M4Date,Normal,0,d1,false,PasteCurDate);
//  EditFieldTL(120,-67,80,"Location",M4UStr,Normal,20,f3,false,LocationSClass);
//  EditFieldTL(320,-67,80,"Resource Types",   M4UStr,Normal,20,f1,false,ResTypeSClass);
//  EditFieldTL(120,-47,80,"Item",M4UStr,Normal,20,f4,false,LocationSClass);
//  EditFieldTL(320,-47,80,"Activity Type",   M4UStr,Normal,30,f5,false,ActTypeSClass);
//  EditFieldTL(120,-27,280,"Information",   M4Str,Normal,100,f2,false,0);
  h = -180; v = -50;
//  ButtonFrame(h,vm=v,150,2,"Display Mode");
//  RadioButton(h,v,0,0,            "Time",Comparison);
//  RadioButton(h,v+=16,1,0,        "Profile,Time",Comparison);
  EndWindow;
  
  /***************** POINT OF SALES ROLE *********************/
  
  WindowBegin("Invoices",IVLClass,CGmlist,-);
  SetWRect(20,80,690,291);
  Sizeable(-1,-1,0,0);
  SpawnClass(IVDClass);
  UseView(IVVc);
  FormName(PrintIVL);
  RecordList(4,17,-21,-39);
  
  RevRLCellKey(10,6,120,19,SerNr,false,12,patM4black,SerNr);
  RLCell(210,6,280,19,Sum4,false,12,patM4black);
  
  RLCell(10,26,100,39,CustCode,false,12,patM4black);
  RLCell(110,26,280,39,Addr0,false,12,patM4black);
  
  /*
  RlColKey(4,2,"N_o.",SerNr,false,SerNr);
  RlColKey(70,70,"O_K",OKFlag,false,OKFlag);
  RlColKey(105,105,"Inv. Date",InvDate,false,InvDate);
  RlColKey(180,180,"O_fficial No.",OfficialSerNr,false,OfficialSerNr);    
  RlColKey(287,287,"O_rder No.",OrderNr,false,OrderNr);
  RlColKey(360,360,"Customer",CustCode,false,CustCode);
  RlColKey(430,430,"Name",Addr0,false,Name);
  RlColKey(-100,-100,"Total",Sum4,true,Sum4);
  RlCol(-35,-35,"",CredMark,true);
  RlCol(-25,-25,"Cur.",CurncyCode,true);
  RlCol(-1,-1,"",Invalid,true);
  */
  
  //SearchField("Search");
  //BrowseSubsetButton(-40,-15);
  
  SpecialMenu("OK",'G',0,"OKIVLsm");
  SpecialMenu("Print Proforma Invoices",' ',1,"PrintIVLsm");
  SpecialMenu("Invoice Status",'r',2,"IVInfoIVLsm");
  SpecialMenu("Send/Resend Argentinian E-Invoices",'a',3,"SendArgEInvLsm");
  EndWindow;
  
  WindowBegin("Invoice",IVDClass,CGview,-);
  SetWRect(20,80,320,480);
  Sizeable(-1,-1,0,0);
  UseView(IVVc);
  vs = 38;
  v = 8; // 6?
  iPhoneTopBar;
  
  EditField(20,v,120,"No",Normal,SerNr,false,0); // TSerSClass
  EditField(-160,v,-20,"#Salesman#",Normal,SalesMan,false,UserSClass);
  EditField(20,v+=vs,120, "Cust",Normal,CustCode,false,CUSClass);
  //EnterSkip(PayDeal);
  EditField( 20,v+=vs,-20,"Name",Normal,Addr0,false,0);
  //CheckBox(140,v+=20,0,"Info on Trans.",ARonTR);
  EnterSkip(Math);
  v = v+=vs;
  MatrixBegin(1,v,-1,-96,-,50);
  MatTypedRow(stp);
  //Flip(0);
  
  t = kInvoiceRowTypeNormal;
  MatCell(t,10,6,70,19,ArtCode,false,12,patM4blue);
  MatCell(t,140,6,180,19,Quant,true,12,patM4black);
  MatCell(t,190,6,250,19,Price,true,12,patM4black);
  MatCell(t,10,26,210,39,Spec,false,12,patM4gray);
  
  t = kInvoiceRowTypeCreditCardPayment;
  MatCell(t,10,6,70,19,PayMode,false,12,patM4blue);
  MatCell(t,60,6,180,19,AuthorizationCode,true,12,patM4black);
  MatCell(t,190,6,250,19,Sum,true,12,patM4black);
  MatCell(t,10,26,210,39,CreditCard,false,12,patM4gray);
  
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  
  /*
  vs = 22;
  v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,3,"C");
  */
  
  //HalPushButton(20,-41,100,25,"IVDClassAddItemRow","Add Item");
  EditField(15,-81,90,"TAX",ViewOnly ,Sum3,true,0);
  EditField(115,-81,90,"Sum",ViewOnly ,Sum1,true,0);
  EditField(215,-81,90,"Tot.",ViewOnly ,Sum4,true,0);
  BottomBar;
  //CheckBox(140,v=-20,0,"OK",OKFlag);
  EndWindow;
  
  WindowBegin("Edit Invoice Row",IVRowDClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(0,0,320,460);
  Sizeable(-1,-1,0,0);
  FormWindow;
  ActiveFieldOnNew("f1");    
  iPhoneTopBar;
  h = 105;
  h2 = -30;
  v = 52;
  vs = 38;
  EditField(h,v,h2,"Item",Normal,f1,true,INSClass);
  EditField(h,v+=vs,h2,"Description",Normal,f2,true,0);
  EditField(h,v+=vs,h2,"Quantity",Normal,vals0,true,0);
  EditField(h,v+=vs,h2,"Price",ViewOnly,vals1,true,0);
  EditField(h,v+=vs,h2,"Discount",Normal,vals2,true,0);
  EditField(h,v+=vs,h2,"Row Sum",ViewOnly,vals3,true,0);
  BottomBar;
  EndWindow;

  WindowBegin("Paste Item",iPhoneINSClass,CGslist,-);
  Sizeable(-1,-1,0,0);
  UseView(INVc);
  SpawnClass(INDClass);
  SetWRect(0,0,320,418);
  // FlowView(0,0,-1,200);
  
  v = 6;
  vs = 38;
  
  //SearchField("Search");
  
  // SoftEditField(20,v,140,"",Normal,"AddItemID",false,0,M4Str,40);
  // HalPushButton(-120,v,-20,v+30,"iPhoneINSClassAddItem","Add Item");
  
  v = v + vs;
  
  RecordList(0,v,-1,-1);
  RlColKey(4,4,"No.",Code,false,ActCode);
  RlColKey(160,160,"Description",Name,false,ActName);
  RlCol(-120,-120,"Base Price",UPrice1,true);
  CalculatedColumn(-50,-50,"In #Stock#","INSClassInStock",true);
  // SearchField("Search");
  EndWindow;
  
  WindowBegin("Pay with Credit Card",AddCCChargeVClass,CGother,RcType);
  SetWRect(20,80,420,240);
  Sizeable(-1,-1,0,0);
  UseView(RcVc);
  Modality(1);
  h = 20; h2 = 160; v = 6; vs = 35;
  
  // StaticText(h,v+12,"Charge Credit Card",false);
  EditField(h,v+=vs,-20,"Credit Card",ViewOnly,f1,false,0);
  EditField(h,v+=vs,-20,"Name",ViewOnly,f2,false,0);
  EditField(h,v+=vs,-20,"Expires",ViewOnly,f3,false,0);
  EditField(h,v+=vs,-20,"Outstanding",ViewOnly,vals0,false,0);
  EditField(h,v+=vs,-20,"Charge",Normal,vals1,false,0);
  
  HalPushButton(h,v+=(vs + 6),h+80,v+20,"AddCCChargeVClassOK","Pay");
  HalPushButton(h2,v,h2+80,v+20,"AddCCChargeVClassCancel","Cancel");
  EndWindow;
  /***************** END POINT OF SALES *********************/
    
  /************ TASK MANAGER ROLE ********************/
/*  
  WindowBegin(" - Task Manager",ToDoWClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(20,80,320,480);
  Sizeable(-1,-1,0,0);
  vs = 38;
  v = 52;
  iPhoneTopBar;
  TaskManager(0,0,-1,-24); // should be one more right...
  BottomBar;
  EndWindow;
*/  
  
  WindowBegin("Edit Activity Row",ActRowDClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(0,0,320,460);
  Sizeable(-1,-1,0,0);
  
  iPhoneTopBar;
  
  h = 105;
  h2 = -30;
  v = 52;
  vs = 38;
  
  EditField(h,v,h2,"Code",Normal,f1,true,0);
  EditField(h,v+=vs,h2,"Text",Normal,f2,true,0);
  
  BottomBar;
  EndWindow;
  /************ END TASK MANAGER *******************/
  
  /************ JOB COSTING ROLE *******************/
  
  WindowBegin("Projects",PRLClass,CGmlist,-);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  SpawnClass(PRDClass);
  UseView(PRVc);
  RecordList(1,1,-1,-1);
  RlColKey(4,1,    "Project",Code,false,Code);
  RlColKey(75,75,  "#Salesman#",PrSalesMan,false,PrSalesMan);
  RlColKey(131,131,"Status",StatMark,false,StatMark);
  RlColKey(171,171,"Class",PRClass,false,PRClass);
  RlColKey(211,211,"Stage",PRStage,false,PRStage);
  RlColKey(261,261,"Customer",CustCode,false,CustCode);
  RlColKey(341,341,"Name",CustName,false,CustName);
  RlColKey(471,471,"Description",Name,false,Name);
  EndWindow;
  
  WindowBegin("Project",PRDClass,CGview,-);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  UseView(PRVc);
  
  h = 10; h2 = 140; vs = 38;
  //Tile(0,70+18,false,"",Person);
  EditField(h,v=6,120,"Code",St_i,Code,false,0); // 
  EditField(h2,v,-10,"Cust. Code",Normal,CustCode,false,CUSClass);
  EditField(h,v+=vs,-10,"Cust. Name",Normal,CustName,false,0);
  EditField(h,v+=vs,-10,"Description",Normal,Name,false,0);
  
  v = v + vs;
  
  // HalPushButton(30,v+=vs,-30,v+22,"AddTimeToProject","Add Time");
  
  /*
  Tile(0,0,false,"",f1);
  TileButton(1,"Details");
  TileButton(2,"Time");
  TileButton(3,"Expenses");
  TileButton(4,"Orders");
  Tile(1,372,false,"",f1);
  */
  // ----
  //Tile(2,372,false,"",f1);
  //RecordList2(1,1,-1,-1,"ActVc");
  //RlColKey(94,94,"Comment",Header,false,PRComment);
  //Tile(3,372,false,"",f1);
  //RecordList2(1,1,-1,-1,"ExpVc");
  //RlColKey(94,94,"Comment",Header,false,PRComment);
  //Tile(4,372,false,"",f1);
  //RecordList2(1,1,-1,-1,"ORVc");
  //RlColKey(94,94,"Comment",Header,false,PRComment);
  EndWindow;
  
  WindowBegin("Expenses",ExpLClass,CGmlist,-);
  SetWRect(0,0,320,418);
  Sizeable(-1,-1,0,0);
  SpawnClass(ExpDClass);
  UseView(ExpVc);
  RecordList(1,1,-1,-1);
  RlColKey(4,1,    "No.",SerNr,false,SerNr);
  RlColKeyTL(71,57,"OK",M4Mark,OKFlag,false,OKFlag);
  RlColKey(96,96,"Trans. Date",TransDate,false,TransDate);
  RlCol(221,221,"Exp. Date",DocDate,false);
  RlColKey(305,305,"Person",Person,false,Person);
  RlColKey(405,405,"Name",Name,false,Name);
  RlCol(-10,-10,"",CurncyCode,true);
  RlCol(-5,-5,"",PayVal,true);
  RlCol(-1,-1,"",Invalid,true);
  EndWindow;
  
  WindowBegin("Expense",ExpDClass,CGview,-);
  SetWRect(20,80,615,350);
  Sizeable(-1,-1,0,0);
  UseView(ExpVc);
  FormName(ExpForm);
  ActiveFieldOnNew("DocDate");
  h = 10; h2 = 140; vs = 38;
  //Tile(0,70+18,false,"",Person);
  EditField(h,v=6,120,"No.",Normal,SerNr,false,0);// TSerSClass // St_i
  EditField(h2,v,-10,"Exp. Date",Normal,DocDate,false,PasteCurDate);
  EditField(h,v+=vs,120,"Person",Normal,Person,false,UserSClass);
  EnterSkip(OKSign);
  EditField(h2,v,-10,"Name",Normal,Name,false,0);
  EditField(h,v+=vs,120,"Signer",ViewOnly,OKSign,false,0);
  EditField(h2,v,-10,"Currency",Normal,CurncyCode,false,CurncyCodeSClass);
  //EditField(402,v,82,"Trans. Date",Normal,TransDate,false,PasteCurDate);
  //EditField(242+200,v,-100,"Tax Authority ID",Normal,TaxAuthID,false,0);
  //EditField(70,-21,50,"Currency",Normal,CurncyCode,false,CurncyCodeSClass);
  //CheckBox(242,vm,0,"OK",OKFlag);
  
  //TileButton(1,"Details");
  //TileButton(2,"Rows");
  //Tile(1,120,true,"1",Math);
  
  MatrixBegin(1,v+=vs,-1,-44,-,500);
  MatTypedRow(stp);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  
  BottomBar;
  
  //CheckBox(24,-21,0,"OK",OKFlag);
  //EditField(220,-21,50,"No. of Documents",Normal,NrofRecs,true,0);
  //EditField(320,-21,100,"#VAT#",ViewOnly,CalcVATVal,true,0);
  //EditField(-140,-21,100,"TOTAL",ViewOnly,PayVal,true,0);
  //EnterSkip(Math);
  //h=4;
  
  EndWindow;
  
  /************ END JOB COSTING ********************/
  
  /************ REPORTING ROLE *********************/
  WindowBegin("Edit Company Row",CompaniesRowDClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(0,0,320,460);
  Sizeable(-1,-1,0,0);
  
  iPhoneTopBar;
  
  h = 30;
  h2 = -30;
  v = 9;
  vs = 38;
  
  EditField(h,v,h2,"Code",Normal,f1,true,0);
  EditField(h,v+=vs,h2,"Name",Normal,f2,true,0);
  EditField(h,v+=vs,h2,"ShortName",Normal,f3,true,0);
  EditField(h,v+=vs,h2,"TCP/IP",Normal,f4,true,0);
  EditField(h,v+=vs,h2,"Port",Normal,f5,true,0);
  
  BottomBar;
  EndWindow;
  
  
  WindowBegin("Paste Tag/Object",ObjSClass,CGslist,ObjView);
  SpawnClass(ObjDClass);
  SetWRect(220,80,600,298);
  Sizeable(-1,-1,0,0);
  UseView(ObjVc);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,120,19,Code,false,12,patM4blue,Code);
  RLCell(210,6,280,19,OTCode,false,12,patM4black);
  RLCell(10,26,280,39,Comment,false,12,patM4black);

  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Tag/Object Type",OTSClass,CGslist,OTView);
  SetWRect(240,80,600,298);
  Sizeable(-1,-1,0,0);
  UseView(OTVc);
  SpawnClass(OTDClass);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,280,19,Code,false,12,patM4blue,Code);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Account",AccSClass,CGslist,AccView);
  SpawnClass(AccDClass);
  SetWRect(64,80,550,300);
  Sizeable(-1,-1,0,0);
  UseView(AccVc);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,280,19,AccNumber,false,12,patM4blue,AccNumber);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Person",UserSClass,CGslist,UserView);
  SetWRect(64,80,509,298);
  Sizeable(-1,-1,0,0);
  UseView(UserVc);
  SpawnClass(USDClass);
//  h = 20; HalPushButton(h,v=3,h+80,v+20,"SwitchToGlobalUser","Global Users");
  RecordList(4,17+28,-21,-39);
  RLCellKey(10,6,280,19,Code,false,12,patM4blue,Code);
  RLCell(10,26,280,39,Name,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Item Classification",DISClass,CGslist,DIView);
  SpawnClass(DIDClass);
  SetWRect(100,80,400,298);
  Sizeable(-1,-1,0,0);
  UseView(DIVc);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,120,19,Code,false,12,patM4blue,Code);
  RLCell(210,6,280,19,CType,false,12,patM4black);
  RLCell(10,26,280,39,Name,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Currency",CurncyCodeSClass,CGslist,CurncyCodeView);
//  SpawnClass(CurncyCodeDClass);
  SetWRect(220,80,600,298);
  Sizeable(-1,-1,0,0);
  UseView(CurncyCodeVc);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,280,19,CurncyCode,false,12,patM4blue,Comment);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Customer Category",CCatSClass,CGslist,-);
  SetWRect(240,80,600,298);
  Sizeable(-1,-1,0,0);
  UseView(CCatVc);
  SpawnClass(CCatDClass);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,280,19,Code,false,12,patM4blue,Code);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Contact Classification",CClassSClass,CGslist,-);
  SetWRect(64,80,509,298);
  Sizeable(-1,-1,0,0);
  UseView(CClassVc);
  SpawnClass(CClassDClass);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,120,19,Code,false,12,patM4blue,Code);
  RLCell(210,6,280,19,CType,false,12,patM4black);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Classification Type",CTypeSClass,CGslist,CTypeView);
  SetWRect(240,80,600,298);
  Sizeable(-1,-1,0,0);
  UseView(CTypeVc);
  SpawnClass(CTypeDClass);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,280,19,Code,false,12,patM4blue,Code);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Item",INSClass,CGslist,-);
  SetWRect(210,80,850,498);
  Sizeable(-1,-1,0,0);
  UseView(INVc);
  SpawnClass(INDClass);
  RecordList(4,v+17,-21,-39);
  RLCellKey(10,6,150,19,Code,false,12,patM4blue,Code);
  RLCell(210,6,280,19,Group,false,12,patM4black);
  RLCell(10,26,150,39,Name,false,12,patM4black);
  RLCell(210,26,280,39,UPrice1,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Item Group",ITSClass,CGslist,-);
  SetWRect(240,80,600,298);
  Sizeable(-1,-1,0,0);
  UseView(ITVc);
  SpawnClass(ITDClass);
  RecordList(4,17,-21,-39);
  RLCellKey(10,6,280,19,Code,false,12,patM4blue,Code);
  RLCell(10,26,280,39,Comment,false,12,patM4black);
  SearchField("Search");
  EndWindow;

  WindowBegin("Paste Period",PerSClass,CGother,HBlRecType);
  SetWRect(240,80,520,300);
  Sizeable(-1,-1,0,0);
  iPhoneTopBar;
  StringList(0,0,-1,-1);
  EndWindow;
  
  /************ END REPORTING ************************/
  
  /************* STOCKTAKING ROLE ***********************/
  WindowBegin("#Stocktaking#",StockTakeDClass,CGview,-);
  //WindowTitleSuperscript("Mobile #Stock#");
  SetWRect(20,80,560,350);
  Sizeable(-1,-1,0,0);
  UseView(StockTakeVc);
  h = 10; h2 = 165;
  vs = 38;
  EditField(h,v=6,145,"No.",Normal,SerNr,false,0);
  EditField(h2,v,145,"Location",Normal,Location,false,LocationSClass);
  EditField(h,v+=vs,300,"Trans. Date",Normal,TransDate,false,PasteCurDate);
  EditField(h,v+=vs,-10,"Comment",Normal,Comment,false,0);
  CheckBox(40,v+=vs,0,"OK",OKFlag);
  EnterSkip(Math);
//  CheckBox(420,v=6,0,"Set #Stock# Levels to these Balances on this day",SetStockValue); // Still not working properly
//  CheckBox(420,v+=vs,0,"Override Backdated",OverrideBackdated); // Still not working properly
  v = v + 42;
  //vm = v + 1;
  MatrixBegin(0,v,-1,-1,-,200);
  
  MatCell(t=1,10,6,120,19,ArtCode,false,12,patM4black);
  MatCell(t,130,6,280,19,SerialNr,false,12,patM4black);
  MatCell(t,10,26,190,39,Spec,false,12,patM4black);
  MatCell(t,200,26,280,39,Qty,true,12,patM4black);
  
  //MatCol(1,-340,"Position",0,Position,false,PosSClass);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
//  SpecialMenu("Fill in Current Cost",' ',1,"StockTakeFillFIFODsm");
//  SpecialMenu("Item Search",'f',1,"ItemSearchDsm");
//  SpecialMenu("Import Data from Digitag",'f',1,"StockTakeDigitagDsm");
  EndWindow;
  
  WindowBegin("#Stocktakings#",StockTakeLClass,CGmlist,-);
  SetWRect(0,0,320,418);
  CloseOnCancel;
  Sizeable(-1,-1,0,0);
  iPhoneTopBar;
  SpawnClass(StockTakeDClass);
  UseView(StockTakeVc);
  RecordList(4,17,-21,-39);
  RlCellKey(10,6,90,19,SerNr,false,12,patM4black,SerNr);
  RlCell(100,6,200,19,TransDate,false,12,patM4black);
  RlCell(210,6,280,19,Location,false,12,patM4black);
  RlCell(10,26,280,39,Comment,false,12,patM4black);
//  SearchField("Search");
//  SpecMenuItem("OK",'G',0);
  EndWindow;
  
  
  WindowBegin("Edit #Stocktaking# Row",StockTakeRowDClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(0,0,320,460);
  Sizeable(-1,-1,0,0);
  FormWindow;
  ActiveFieldOnNew("long2");    
  iPhoneTopBar;
  h = 105;
  h2 = -30;
  v = 52;
  vs = 38;
  EditField(h,v,h2,"Item",Normal,f1,false,INSClass);
  EditField(h,v+=vs,h2,"Description",ViewOnly,f2,false,0);
  EditField(h,v+=vs,h2,"Serial No.",Normal,f4,false,SerialNrSClass);
  EditField(h,v+=vs,h2,"Counted",Normal,long2,true,0);
  CheckBox(h,v+=vs,0,"In #Stock#",BaseWidth);
  EditField(h,v+=vs,h2,"Location",Normal,f3,false,LocationSClass);
  EditField(h,v+=vs,h2,"Position",Normal,f5,false,PosSClass);
  EditField(h,v+=vs,h2,"Width",Normal,vals1,true,0);
  EditField(h,v+=vs,h2,"Height",Normal,vals2,true,0);
  EditField(h,v+=vs,h2,"Depth",Normal,vals3,true,0);
  EditField(h,v+=vs,h2,"Base Price",ViewOnly,vals4,true,0);
  EditField(h,v+=vs,h2,"Coefficient",Normal,vals0,false,0);
  BottomBar;
  EndWindow;
  /************* END STOCKTAKING ROLE ***********************/
  
  return;
end;
