/* Haengpl.hal */

external inner function real VATZoneButtonsLabelsENG(real,real,real,real);
external inner function string 255 VATZoneEditFieldLabelENG(Integer);

event DefineWindows
begin
  Real i,h,h1,h2,h3,h4,h5,v,vm,hs,l,vs,v3,f,t,v2;
  
  SetLangMode(LangEnglish,"ENG",2);

  WindowBegin("Payment",OPDClass,CGview,-);
  SetWRect(20,80,640,464);
  Sizeable(-1,-1,0,0);
  UseView(OPVc);
  ActiveFieldOnNew("PayDate");    
  h = 100; h2 = 280; h3 = 490; v = 6;
  Tile(0,110,false,"",SerNr);
  EditField(h,v, 80,"No.",St_i,SerNr,false,TSerSClass);
  EditField(h2,v,80,"Payment Date",Normal,PayDate,false,PasteCurDate);
  EditField(h3,v,82,"Trans. Date",Normal,TransDate,false,PasteCurDate);
  EditField(h,v+=20,30,"Payment Mode",Normal,PayMode,false,PMSClass);
  EnterSkip(Math);
  EditField(h2,v,120,"Own Bank A/C",Normal,BankAcc,false,0);
  EditField(h3,v,82,"Sort Code",Normal,SortCode,false,0);
  EditField(h,v+=20,80,"Reference",Normal,PayNumber,false,0);
  CheckBox(h2,v,0,"Supp. Info on Trans.",APonTR);
  EditField(h3,v,82,"Language",Normal,LangCode,false,LangSClass);
  EditField(h,v+=20,472,"Comment",Normal,BankName,false,0);
  EnterSkip(Math);
  vs = 20;
//  CheckBox(h,v=6,0,"Re_jected",RejectedFlag);//not used any more
//  CheckBox(h2,v,0,"Supp. Info on Trans.",APonTR);
  TileButton(1,"Payments");
  TileButton(2,"Bank");
  Tile(1,120,true,"1",Math);
  CheckBox(25,v=-39,0,"O_rdered",OrderedFlag);
  CheckBox(25,v=-20,0,"OK",DoneFlag);
  HalPushButton(150,-50,150+100,-5,"EPaymentSignOPDsm","Sign");
  HalPushButton(150,-25,150+100,-5,"EPaymentQueOPDsm","Send to Bank"); //4.4
  EditField(-300,-21,50,"Currency",Normal,PayCurCode,false,CurncyCodeSClass);
  EditField(-125,-21,85,"Withdrawn",Normal,CurPayVal,true,0);
  h=4;
//  MatrixBegin(h,v=24,-50,-40,-,99);
  MatrixBegin(h,v=24,-50,-49,-,200);
  vm = v;
  MatTypedRow(stp);
  MatOverStrike(ovst);
  Flip(0);
  MatCol(t=1,24,"Invoice No.",0,VISerNr,false,APSClass);
  EnterSkip(RecVal);
  MatCol(t  ,105,"#Supplier#",0,VECode,false,VESClass);
  MatCol(t=5,24,"",0,VISerNr,false,APSClass);
  MatText(t,70,"Set. Disc.",true);
  MatCol(t,140,"Tag/Object",0,Objects,false,ObjSClass);
  MatCol(t,-360,"PI.Cur",0,PInvCurncy,true,0);
  MatCol(t,-320,"Invoice Val",0,PInvVal,true,0);
  MatCol(t,-240,"B. Cur",0,BankCurncy,true,CurncyCodeSClass);
  MatCol(t,-200,"Bank Amount",0,BankVal,true,0);
  MatCol(t,-120,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-80,"Sent Value",0,RecVal,true,0);
  MatCol(t=7,24,"",0,VISerNr,false,APSClass);
  MatText(t,-480,"Fee",true);
  MatCol(t,-390,"PI.Cur",0,PInvCurncy,true,0);
  MatCol(t,-350,"Invoice Val",0,PInvVal,true,0);
  MatCol(t,-260,"B. Cur",0,BankCurncy,true,CurncyCodeSClass);
  MatCol(t,-220,"Bank Amount",0,BankVal,true,0);
  MatCol(t,-130,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Value",0,RecVal,true,0);
  Flip(1);
  MatCol(t=1,190,"Text",0,Comment,false,0);
  MatCol(t,-270,"P.Mode",0,PayMode,false,PMSClass);
  MatCol(t,-220,"Cheque No.",0,ChequeNr,false,0);
  MatCol(t,-150,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-100,"Sent Value",0,RecVal,true,0);
  Flip(2);
  MatCol(t=1,190,"Invoice Currency",0,PInvCurncy,true,CurncyCodeSClass);
  MatCol(t,-310,"Open Inv. Val",0,PInvOutstand,false,0);
  MatCol(t,-220,"Inv. Value",0,PInvVal,true,0);
  MatCol(t,-130,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Value",0,RecVal,true,0);
  Flip(3);
  MatCol(t=1  ,190,"Text",0,Comment,false,0);
  MatCol(t  ,-260,"Tags/Objects",0,Objects,false,ObjSClass);
  MatCol(t,-130,"S.Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Value",0,RecVal,true,0);
  Flip(4);
  MatCol(t=1,190,"Text",0,Comment,false,0);
  MatCol(t,-300,"B. Cur",0,BankCurncy,true,CurncyCodeSClass);
  MatCol(t,-250,"Bank Amount",0,BankVal,true,0);
  MatCol(t,-130,"S.Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Val",0,RecVal,true,0);
  Flip(5);
  MatCol(t=1,190,"Text",0,Comment,false,0);
  MatCol(t,-320,"Order No.",0,OrderNr,false,POSClass);
  MatCol(t,-230,"Prepayment No",0,PrepayNr,false,OPPSClass);
  MatCol(t,-130,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Value",0,RecVal,true,0);
  Flip(6);
  MatCol(t=1,190,"Text",0,Comment,false,0);
  MatCol(t,-310,"V-Cd",0,VATCode,false,VATCodeSClass);
  MatCol(t,-270,"VAT Value",0,VATVal,false,0);
//  MatCol(t,-200,"Extra Tax",0,TAX1Sum,false,0);
  MatCol(t,-130,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Value",0,RecVal,true,0);
  Flip(7);
  MatCol(t=1,190,"Round Off A/C",0,RoundOffAcc,false,AccSClass);
  MatCol(t,-220,"Round Off",0,RoundOff,true,0);
  //MatCol(t,-220,"Bank Fee",0,BankFeeVal,true,0);//also on flip(8)
  MatCol(t,-130,"S. Cur",0,RecCurncy,true,CurncyCodeSClass);
  MatCol(t,-90,"Sent Value",0,RecVal,true,0);
  Flip(8);
  MatCol(t=1,190,"Creditors A/C",0,APAcc,false,AccSClass);
  MatCol(t,-320,"Bank Reference",0,BankRefStr,false,0);
  MatCol(t,-220,"To Bank A/C",0,BankAcc,false,VEBankAccSClass);
  MatCol(t,-90,"Sort Code",0,SortCode,false,0);
  Flip(9);
  MatCol(t=1,190,"B.Cur",0,BankCurncy,true,CurncyCodeSClass);
  MatCol(t,-440,"Bank Amount",0,BankVal,true,0);
  MatCol(t,-355,"Bank Fee",0,BankFeeVal,true,0);
  MatCol(t,-280,"To B. Cur. 1",0,ToRateB1BankVal,true,0);
  MatCol(t,-210,"B. Cur. 1",0,B1BankVal,true,0);
  MatCol(t,-140,"B. Cur. 2",0,B2BankVal,true,0);
//  MatCol(t,-120,"Fee %",0,BankFeePrc,true,0); /* What was this ?? */
  MatCol(t,-70,"Coef Val",0,Coef,true,0);
  Flip(10);
  MatCol(t=1  ,190,"Text",0,Comment,false,0);
  MatCol(t,-320,"Instalment",0,InstNr,false,APInstallSClass);
  MatCol(t,-250,"W. Tax",0,WHTax,false,WHTaxSClass);
  MatCol(t,-200,"Reference Number",0,rkPayNumber,false,0);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,3,"C");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,4,"D");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,5,"E");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,6,"F");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,7,"G");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,8,"H");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,9,"I");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,10,"J");
  Tile(2,50,true,"1",BankAcc);
  v=6; h= 100;
  EditField(h,v,120,"Own Bank A/C",Normal,BankAcc,false,0);

  CheckBox(h2,v,0,"Foreign Payment",ForeignPayment);
  ButtonFrame(h,vm=(v+=40),123,3,"Payment Format");
  RadioButton(h,v,0,0,"Per Row",PayperSupplier);
  RadioButton(h,v+=16,1,0,"Per #Supplier#",PayperSupplier);  
  RadioButton(h,v+=16,2,0,"Batch",PayperSupplier);  
  ButtonFrame(h2,v=vm,123,3,"Payment Method");
  RadioButton(h2,v,0,0,"Normal",PayMethod);
  RadioButton(h2,v+=16,1,0,"Express",PayMethod);
  RadioButton(h2,v+=16,2,0,"Extra urgent",PayMethod);  
  ButtonFrame(h3,v=vm,123,3,"Bank fees");
  RadioButton(h3,v,0,0,"We pay",Bankfees);
  RadioButton(h3,v+=16,1,0,"Suppliers pay",Bankfees);
  RadioButton(h3,v+=16,2,0,"Shared",Bankfees);  
  
/*  
  CheckBox(25,v=-39,0,"O_rdered",OrderedFlag);
  CheckBox(25,v=-20,0,"OK",DoneFlag);
  HalPushButton(150,-30,150+100,-5,"EPaymentQueOPDsm","Send to Bank"); 
*/  
  SpecMenuItem("Print Forms",' ',0); // any code for this one??, no code
  SpecialMenu("(-",' ',1,"");
  SpecialMenu("New Settlement Discount",' ',2,"CashDiscountOPDsm");
  SpecialMenu("New Fee",' ',3,"NewFeeOPDsm");
  SpecialMenu("Open NL Transaction",'t',5,"OpenTRFromOP");
  SpecialMenu("Assign Cheque Number",' ',6,"AssignChequeOPDsm");
  SpecialMenu("Prepare Cheque",' ',9,"PrepChecqOPDsm");
  SpecialMenu("Create Cash Out",' ',8,"CLOutFromOPDsm");
  SpecialMenu("Create Email",'m',9,"CreateMailFromOPDsm");
  SpecialMenu("Create First Event",' ',10,"FirstEventOPDsm");
  SpecialMenu("Create VAT Correction P/L",' ',9,"VATCorrectionOPsm");
  SpecialMenu("Calculate Withholding Taxes",' ',11,"WithholdTaxesOPDsm");
  SpecialMenu("Bank Statement",' ',12,"BankStOPDsm");
  SpecialMenu("E-Payment Status",' ',13,"EPaymentStatusOPDsm");
  SpecialMenu("Print Cash IN-OUT",' ',4,"PrintCashInOutOPDsm");
  EndWindow;
  
  return;
end;
