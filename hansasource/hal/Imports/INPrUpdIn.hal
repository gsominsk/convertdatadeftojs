global
updating procedure INPrUpdIn()
BEGIN
  string 255  InLine;
  record INVc oldINr;
  record INVc INr;
  val t;
  Boolean testf;
  
  while (TestEOF()==false) begin
    RecordNew(INr);
    InLine = ImportField;
    if (blank(InLine)) then begin
      goto LSKIP;
    end;  
    INr.Code = InLine;
    if (ReadFirstMain(INr,1,true)==false) then begin
      RecordNew(INr);
      INr.Code = InLine;
      INr.Name = ImportField;
      t = StringToVal(ImportField,M4Val);
      INr.InPrice = t/100;
      INr.LastPriceChange = CurrentDate;   
      if (RecordStore(INr,false)) then begin
      end;
    end else begin
      RecordCopy(oldINr,INr);
      InLine = ImportField;
      if (len(InLine)>60) then begin
        InLine = Left(InLine,60);
      end;  
      INr.Name = InLine;
      t = StringToVal(ImportField,M4Val);
      INr.InPrice = t/100;   
      INr.LastPriceChange = CurrentDate;   
//        INr.InPrice = Round(INr.InPrice,RoundRec.RndFIFO);
      if (RecordUpdate(oldINr,INr,false)==0) then begin
      end;
    end;
    UserTrace(INr.Code,M4Str);
LSKIP:;   
    testf = NextImportLine(true); 
  end;  
  RETURN;
END;