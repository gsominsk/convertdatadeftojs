global
procedure RHist2Rn(record RcVc RepSpec)
BEGIN
  record RHistVc RHistr;
  record RHistVc RHist2r;
  Boolean Accs;
  
  StartReportJob(USetStr(9060));
  EndHeader;

  Accs = true;
  RHist2r.RecidStr = RepSpec.f1;
  if (ReadFirstKey("RecidStr",RHist2r,1,true)) then begin
    ResetLoop(RHistr);
    RHistr.RecidStr  = RepSpec.f1;
    while (LoopKey("RecidStr",RHistr,1,Accs)) begin
      if (RHistr.RecidStr!=RHist2r.RecidStr) then begin Accs = false; end;
      if (Accs) then begin
        StartFormat(15);
//        if (RHistr.accode==2) then begin // Why??
        if (BlobSize(RHistr)>0) then begin
          OutDateID(0,"DblRHist",RHistr.TransDate,false,RHistr.SerNr);
        end else begin
          OutDate(0,0,RHistr.TransDate,false);
        end;
/*
        end else begin
          OutDate(0,0,RHistr.TransDate,false);
        end;
*/
        OutString(120,0,RHistr.TransTime,false);
        OutString(180,0,RHistr.User,false);
        switch (RHistr.accode) begin
          case kRecordHistoryActionCreated: OutString(250,0,USetStr(9061),false); 
          case kRecordHistoryActionUpdated: OutString(250,0,USetStr(9062),false); 
          case kRecordHistoryActionDeleted: OutString(250,0,USetStr(9063),false); 
          otherwise OutString(250,0,RHistr.accode,false); 
        end;
        EndFormat;
      end;
    end;
  end;
  EndJob;
  RETURN;
END;
