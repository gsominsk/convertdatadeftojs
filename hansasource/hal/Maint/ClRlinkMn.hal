external procedure CheckFlush(var Integer,Integer);

global
updating procedure ClearRLinkMn(record RcVc RepSpec)
begin
  record RLinkVc RLinkr;
  boolean TrHs;
  Integer flushcnt;
  
  TrHs = true;
  RLinkr.FromRecidStr = "";
  ResetLoop(RLinkr);
  while (LoopKey("MainKey",RLinkr,1,TrHs)) begin
    if (nonblank(RLinkr.FromRecidStr)) then begin
      TrHs = false;
    end;
    if (TrHs) then begin
      RecordDelete(RLinkr);
      StepBack(RLinkr);
    end;
  end;
  TrHs = true;
  RLinkr.ToRecidStr = "";
  ResetLoop(RLinkr);
  while (LoopKey("ToRecKey",RLinkr,1,TrHs)) begin
    if (nonblank(RLinkr.ToRecidStr)) then begin
      TrHs = false;
    end;
    if (TrHs) then begin
      RecordDelete(RLinkr);
      StepBack(RLinkr);
      CheckFlush(flushcnt,10);
    end;
  end;
  RETURN;
END;

