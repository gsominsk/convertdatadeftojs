external procedure CheckFlush(var Integer,Integer);

global
updating procedure Bud1Mn(record RcVc RepSpec)
begin
  record Bud1Vc oldB1r;
  record Bud1Vc B1r;
  row Bud1Vc Bud1rw;
  Boolean Vws;
  Integer i,rwcnt;
  Integer flushcnt;

  Vws = false;
  if (RepSpec.flags[1]==1) then begin
    B1r.Objects = RepSpec.ObjStr;
  end;
  Vws = true;
  while (LoopKey("ObjAccKey",B1r,1,Vws)) begin
    RecordCopy(oldB1r,B1r);
    if ((RepSpec.flags[1]==0) or (B1r.Objects==RepSpec.ObjStr)) then begin
      B1r.YearVal = BlankVal;
      B1r.PrevProc = BlankVal;
      B1r.BFCode = "";
      rwcnt = MatRowCnt(B1r);
      for (i=0;i<rwcnt;i=i+1) begin
        MatRowGet(B1r,i,Bud1rw);
        Bud1rw.DefStr = "";
        Bud1rw.sval = BlankVal;
        MatRowPut(B1r,i,Bud1rw);
      end;
      if (RecordUpdate(oldB1r,B1r,false)==0) then begin
      end;
      CheckFlush(flushcnt,10);
    end;
    MaintTrace(B1r.AccNumber);
  end;
  return;
end;

global
updating procedure Bud2Mn(record RcVc RepSpec)
begin
  record Bud2Vc oldB2r;
  record Bud2Vc B2r;
  row Bud2Vc Bud2rw;
  Boolean Vws;
  Integer i,rwcnt;
  Integer flushcnt;

  Vws = false;
  if (RepSpec.flags[1]==1) then begin
    B2r.Objects = RepSpec.ObjStr;
  end;
  Vws = true;
  while (LoopKey("ObjAccKey",B2r,1,Vws)) begin
    RecordCopy(oldB2r,B2r);
    if ((RepSpec.flags[1]==0) or (B2r.Objects==RepSpec.ObjStr)) then begin
      B2r.Bud1Proc = BlankVal;
      rwcnt = MatRowCnt(B2r);
      for (i=0;i<rwcnt;i=i+1) begin
        MatRowGet(B2r,i,Bud2rw);
        Bud2rw.DefStr = "";
        Bud2rw.sval = BlankVal;
        MatRowPut(B2r,i,Bud2rw);
      end;
      if (RecordUpdate(oldB2r,B2r,false)==0) then begin
      end;
      CheckFlush(flushcnt,10);
    end;
    MaintTrace(B2r.AccNumber);
  end;
  return;
end;

