remote function Boolean GetFirstItem(var string,var record INVc);

function Boolean TIDClassCodeEFAfter(Integer wn,Integer fn, Integer rownr,Integer changed)
BEGIN
  Boolean res;
  record TIVc TIr;
  record INVc INr;
  string 20 artcode;

  res = true;
  if (changed!=0) then begin
    GetWindowRecord(wn,TIr);
    artcode = TIr.Code;
    if (GetFirstItem(artcode,INr)) then begin
      TIr.Name = INr.Name;
      PutWindowRecord(wn,TIr);    
    end;
  end;
  TIDClassCodeEFAfter = res;
  RETURN;
END;

global
function Boolean TIDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
BEGIN
  Boolean res;

  switch (fieldname) begin
    case "Code": res = TIDClassCodeEFAfter(wn,fn,rownr,changed);
  end;
  TIDClassAfterEditField = res;
  RETURN;
END;
