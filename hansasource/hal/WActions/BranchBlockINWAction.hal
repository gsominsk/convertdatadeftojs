
function Boolean BranchBlockINDClassBranchCodeEFAfter(Integer wn,Boolean changedf)
begin
  Boolean res;
  record CUVc CUr;
  record BranchBlockINVc BBINr;
  
  res = true;
  if (changedf) then begin
    GetWindowRecord(wn,BBINr);
    CUr.Code = BBINr.BranchCode;
    ReadFirstMain(CUr,1,true);
    BBINr.BranchName = CUr.Name;
    PutWindowRecord(wn,BBINr);
  end;
  BranchBlockINDClassBranchCodeEFAfter = res;
  return;
end;

function Boolean BranchBlockINDClassArtCodeEFAfter(Integer wn,Boolean changedf)
begin
  Boolean res;
  record INVc INr;
  record BranchBlockINVc BBINr;
  
  res = true;
  if (changedf) then begin
    GetWindowRecord(wn,BBINr);
    INr.Code = BBINr.ArtCode;
    ReadFirstMain(INr,1,true);
    BBINr.ArtName = INr.Name;
    PutWindowRecord(wn,BBINr);
  end;
  BranchBlockINDClassArtCodeEFAfter = res;
  return;
end;

global
function Boolean BranchBlockINDClassAfterEditField(Integer wn,string fieldname,Integer fn,Integer rownr,Integer changed)
begin
  Boolean res;
  
  res = false;
  switch (fieldname) begin
    case "BranchCode": res = BranchBlockINDClassBranchCodeEFAfter(wn,changed!=0);
    case "ArtCode": res = BranchBlockINDClassArtCodeEFAfter(wn,changed!=0);
  end;
  BranchBlockINDClassAfterEditField = res;
  return;
end;
