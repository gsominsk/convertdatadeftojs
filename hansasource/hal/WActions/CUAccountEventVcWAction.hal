global
function Boolean CUAccountEventDClassCustCodeEFAfter(Integer wn,Integer rownr,Integer changedf)
begin
  record CUAccountEventVc CUAccountEventr;
  record CUVc CUr;

  if (changedf!=0) then begin  
    GetWindowRecord(wn,CUAccountEventr);
    CUr.Code = CUAccountEventr.CustCode;
    if (ReadFirstMain(CUr,1,true)) then begin
      CUAccountEventr.Name = CUr.Name;
    end else begin
      CUAccountEventr.Name = "";
    end;
    PutWindowRecord(wn,CUAccountEventr);
  end;
  CUAccountEventDClassCustCodeEFAfter = true;
  return;
end;

global
function Boolean CUAccountEventDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
BEGIN
  Boolean res;

  switch (fieldname) begin
    case "CustCode": res = CUAccountEventDClassCustCodeEFAfter(wn,rownr,changed);
  end;
  CUAccountEventDClassAfterEditField = res;
  RETURN;
END;

