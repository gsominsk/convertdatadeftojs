
function Boolean AT2DprDClassInventoryNrEFAfter(Integer wn,Integer fn, Integer rownr,Integer changed)
BEGIN
  Boolean res;
  record AT2DprVc AT2Dprr;
  record AT2UnitVc AT2Unitr;

  res = true;
  if (changed!=0) then begin
    GetWindowRecord(wn,AT2Dprr);
    AT2Unitr.InventoryNr = AT2Dprr.InventoryNr;
    if (ReadFirstMain(AT2Unitr,1,true)) then begin
      AT2Dprr.Description = AT2Unitr.Description;
      PutWindowRecord(wn,AT2Dprr);    
    end;
  end;
  AT2DprDClassInventoryNrEFAfter = res;
  RETURN;
END;

global
function Boolean AT2DprDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
BEGIN
  Boolean res;

  switch (fieldname) begin
    case "InventoryNr": res = AT2DprDClassInventoryNrEFAfter(wn,fn,rownr,changed);
  end;
  AT2DprDClassAfterEditField = res;
  RETURN;
END;
