
function Boolean RPTaxRebDClassCodeEFAfter(Integer wn,Boolean changedf)
BEGIN
  record RPTaxVc RPTaxr;
  record RPTaxRebVc RPTaxRebr;

  DeselectWindow(wn,false);
  GetWindowRecord(wn,RPTaxRebr);    
  if (changedf) then begin
    RPTaxr.Code = RPTaxRebr.Code;
    if (ReadFirstMain(RPTaxr,1,true)) then begin
      RPTaxRebr.Comment = RPTaxr.Comment;
    end;
    PutWindowRecord(wn,RPTaxRebr);
  end;
  RPTaxRebDClassCodeEFAfter = true;
  return;
end;

function Boolean RPTaxRebDClassCustCodeEFAfter(Integer wn,Boolean changedf)
BEGIN
  record CUVc CUr;
  record RPTaxRebVc RPTaxRebr;

  DeselectWindow(wn,false);
  GetWindowRecord(wn,RPTaxRebr);    
  if (changedf) then begin
    CUr.Code = RPTaxRebr.CustCode;
    if (ReadFirstMain(CUr,1,true)) then begin
      RPTaxRebr.Name = CUr.Name;
    end;
    PutWindowRecord(wn,RPTaxRebr);
  end;
  RPTaxRebDClassCustCodeEFAfter = true;
  return;
end;

global
function Boolean RPTaxRebDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
BEGIN
  Boolean res;

  switch (fieldname) begin
    case "Code":  res = RPTaxRebDClassCodeEFAfter(wn,changed!=0);
    case "CustCode":  res = RPTaxRebDClassCustCodeEFAfter(wn,changed!=0);
  end;
  RPTaxRebDClassAfterEditField = res;
  RETURN;
END;
