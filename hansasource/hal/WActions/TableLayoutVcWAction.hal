  
function Boolean TLDClassBranchIDEFAfter(Integer wn, Integer rownr,Boolean changedf)
begin
  Boolean res;
  record TableLayoutVc TLr;
  record CUVc CUr;
  
  if (changedf) then begin
    GetWindowRecord(wn,TLr);
    CUr.Code = TLr.BranchID;
    if (ReadFirstMain(CUr,1,true)) then begin
      TLr.BranchName = CUr.Name;
      PutWindowRecord(wn,TLr);
    end;
  end;  
  TLDClassBranchIDEFAfter = res;
  return;
end;

global
function Boolean TLDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
begin
  Boolean res;

  switch (fieldname) begin
    case "BranchID": res = TLDClassBranchIDEFAfter(wn,rownr,changed!=0);
  end;
  TLDClassAfterEditField = res;
  return;
end;
