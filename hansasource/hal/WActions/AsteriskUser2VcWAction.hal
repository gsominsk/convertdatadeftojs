global
updating function Boolean AsteriskUser2DClassOnOKWindow(Integer wn)
begin
  Boolean res;
  record PBXConnectionVc PBXCr;
  record AsteriskUser2Vc AsteriskUserr;
  record RcVc RepSpec;

  res = true;
  GetWindowRecord(wn,AsteriskUserr);
  PBXCr.Code = AsteriskUserr.PBXConnection;
  if (nonblank(AsteriskUserr.PBXConnection)) then begin
    if (ReadFirstMain(PBXCr,1,true)) then begin
      if (PBXCr.UpdateOnRecordChangef!=0) then begin
        RepSpec.f1 = AsteriskUserr.PBXConnection;
        RepSpec.repname = "AsteriskUserMn";
        RepSpec.critname = "AsteriskUserVClass";
        RunMaintenance(RepSpec);
      end;
    end;
  end;
  AsteriskUser2DClassOnOKWindow = res;
end;
