
function Boolean ProdMachineEqDClassCodeEFAfter(Integer wn)
begin
  record ProdMachineEqVc EQr;
  Record AT2UnitVc ATr;
  Boolean res;

  res = true;
  GetWindowRecord(wn,EQr);
  ATr.InventoryNr =  EQr.Code;
  if (ReadFirstMain(ATr,1,true)) then begin
    EQr.Name = ATr.Description;
    PutWindowRecord(wn,EQr);
  end;
  ProdMachineEqDClassCodeEFAfter = res;
  return;
end;


function Boolean ProdMachineEqDClassProdEqCodeEFAfter(Integer wn)
begin
  record ProdMachineEqVc EQr;
  Record AT2UnitVc ATr;
  Boolean res;

  res = true;
  GetWindowRecord(wn,EQr);
  ATr.InventoryNr =  EQr.ProdEqCode;
  if (ReadFirstMain(ATr,1,true)) then begin
    EQr.ProdEqName = ATr.Description;
    PutWindowRecord(wn,EQr);
  end;
  if (EQr.Code==EQr.ProdEqCode) then begin
    MessageBox(0,USetStr(30063));
  end;
  ProdMachineEqDClassProdEqCodeEFAfter = res;
  return;
end;

global
function Boolean ProdMachineEqDClassAfterEditField(Integer wn,string fieldname,Integer fn,Integer rownr,Integer changed)
begin
  Boolean res;

  if(changed!=0) then begin
    switch (fieldname) begin
      case "Code": res = ProdMachineEqDClassCodeEFAfter(wn);
      case "ProdEqCode": res = ProdMachineEqDClassProdEqCodeEFAfter(wn);
    end;
  end;
  ProdMachineEqDClassAfterEditField = res;
  return;
end;

