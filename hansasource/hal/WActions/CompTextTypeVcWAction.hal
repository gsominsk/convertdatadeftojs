external function Integer SecondsToTime(LongInt,var Time);
external function LongInt TimeDiffInSeconds(Time,Time);
external function Time AddTime_Minutes(Time,Time);
external function LongInt MoveTime(Time,Time,var Time);
external function Boolean DateWarned(Date,string);
external remote procedure ActType2SClassOnOKWindowDo(string,Array string,Array string,var Integer);
external remote function string 255 GetSelDI_ActType2SClass(string,LongInt,string);
external remote function string 255 UpWindDI_ActType2SClass(string,Integer);
external procedure ReverseString(string,var string);
external function Time AddTime2(Time,LongInt);
external function Boolean FindCustomerRelation(string,string,var record CUVc);
remote function Boolean ActVc_PasteSerialNr(var record ActVc);
external function LongInt DateDiff(Date,Date);
external function Time TimeDiff(Time,Time);
external function LongInt TimeToMinutes(Time);
remote function Boolean PasteINInAct(var record ActVc);

function Boolean CompTextTypeDClassTextTypeCodeEFAfter(Integer wn,Integer fn,Integer rownr,Integer changedf)
begin
  Boolean res;
  record TextTypeVc Textr;
  record CompTextTypeVc CompTextTyper;
  row CompTextTypeVc CompTextTyperw;
  res = true;
  if ((changedf!=0) and (rownr>=0)) then begin
    GetWindowRecord(wn,CompTextTyper);
    DeselectWindow(wn,false);
    MatRowGet(CompTextTyper,rownr,CompTextTyperw);
    Textr.Code = CompTextTyperw.TextTypeCode;
    if (ReadFirstMain(Textr,1,true)) then begin
      CompTextTyperw.TextTypeComment = Textr.Comment;
      MatRowPut(CompTextTyper,rownr,CompTextTyperw);
    end;
    PutWindowRecord(wn,CompTextTyper);
  end;
  CompTextTypeDClassTextTypeCodeEFAfter = res;
  return;
end;

global
function Boolean CompTextTypeDClassAfterEditField(Integer wn,string fieldname,Integer fn,Integer rownr,Integer changed)
BEGIN
  Boolean res;
  
  res = false;
  switch (fieldname) begin
    case "TextTypeCode": res = CompTextTypeDClassTextTypeCodeEFAfter(wn,fn,rownr,changed);
  end;
  CompTextTypeDClassAfterEditField = res;
  RETURN;
END;

