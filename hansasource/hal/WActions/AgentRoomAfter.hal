
function Boolean AgentRoomDClassCUCodeEFAfter(Integer wn,Boolean changedf)
begin
  Boolean res;
  record AgentRoomVc AgentRoomr;
  record CUVc CUr;

  res = false;
  if (changedf) then begin
    GetWindowRecord(wn,AgentRoomr);
    CUr.Code = AgentRoomr.CUCode;
    if (ReadFirstMain(CUr,1,true)) then begin
      AgentRoomr.CUName = CUr.Name;
      PutWindowRecord(wn,AgentRoomr);    
    end;
  end;
  res = true;
  AgentRoomDClassCUCodeEFAfter = res;
  return;
end;

global
function Boolean AgentRoomDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
begin
  Boolean res;

  switch (fieldname) begin
    case "CUCode": res = AgentRoomDClassCUCodeEFAfter(wn,changed);
  end;
  AgentRoomDClassAfterEditField = res;
  return;
end;


function Boolean AgentAddonDClassCUCodeEFAfter(Integer wn,Boolean changedf)
begin
  Boolean res;
  record AgentAddonVc AAr;
  record CUVc CUr;

  res = false;
  if (changedf) then begin
    GetWindowRecord(wn,AAr);
    CUr.Code = AAr.CUCode;
    if (ReadFirstMain(CUr,1,true)) then begin
      AAr.CUName = CUr.Name;
      PutWindowRecord(wn,AAr);    
    end;
  end;
  res = true;
  AgentAddonDClassCUCodeEFAfter = res;
  return;
end;

global
function Boolean AgentAddonDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)
begin
  Boolean res;

  switch (fieldname) begin
    case "CUCode": res = AgentAddonDClassCUCodeEFAfter(wn,changed!=0);
  end;
  AgentAddonDClassAfterEditField = res;
  return;
end;

