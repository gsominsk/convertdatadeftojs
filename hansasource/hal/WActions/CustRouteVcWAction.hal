remote procedure CustRouteVc_PasteCustCode(var record CustRouteVc);
remote procedure CustRouteVc_PasteDelAddrCode(var record CustRouteVc);
external function string 40 DelAddrSClassSpecPName(string);

function Boolean CustRouteDClassCustCodeEFAfter(Integer wn,Integer changed)
begin
  record CustRouteVc CustRouter;
  
  if (changed!=0) then begin
    GetWindowRecord(wn,CustRouter);
    CustRouteVc_PasteCustCode(CustRouter);
    PutWindowRecord(wn,CustRouter);
  end;
  
  CustRouteDClassCustCodeEFAfter = true;
  return;
end;

function Boolean CustRouteDClassDelAddrCodeEFAfter(Integer wn,Integer changed)
begin
  record CustRouteVc CustRouter;
  
  if (changed!=0) then begin
    GetWindowRecord(wn,CustRouter);
    CustRouteVc_PasteDelAddrCode(CustRouter);
    PutWindowRecord(wn,CustRouter);
  end;
  
  CustRouteDClassDelAddrCodeEFAfter = true;
  return;
end;

global
function Boolean CustRouteDClassAfterEditField(Integer wn,string fieldname,Integer fn,Integer rownr,Integer changed)
begin
  Boolean res;
  
  switch (fieldname) begin
    case "CustCode": res = CustRouteDClassCustCodeEFAfter(wn,changed);
    case "DelAddrCode": res = CustRouteDClassDelAddrCodeEFAfter(wn,changed);
  end;
  
  CustRouteDClassAfterEditField = res;
  return;
end;

global
function string 40 CustRouteDClassSpecPasteName(Integer wn,string defpsname)
begin
  string 40 psname;

  psname = defpsname;
  switch (WindowActiveField(wn)) begin
    case "DelAddrCode": psname = DelAddrSClassSpecPName(defpsname);
  end;
  
  CustRouteDClassSpecPasteName = psname;
  return;
end;
