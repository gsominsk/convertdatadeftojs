external function LongInt AddTime(Time,LongInt,var Time);
external function LongInt TimeToMinutes(Time);

global
procedure RoutingSumup(var record RoutingVc Routingr)
begin
  row RoutingVc Routingrw;
  record StdOperationVc StdOperationr;
  Integer i,rwcnt;
  Time blankt;
  
  Routingr.DurDays = 0;
  Routingr.DurTime = blankt;
  rwcnt = MatRowCnt(Routingr);
  for (i=0;i<rwcnt;i=i+1) begin
    MatRowGet(Routingr,i,Routingrw);
    StdOperationr.Code = Routingrw.StdOperation;
    if (ReadFirstMain(StdOperationr,1,true)) then begin
      if (StdOperationr.DurDays>=0) then begin
        Routingr.DurDays = Routingr.DurDays + StdOperationr.DurDays;
      end;
      Routingr.DurDays = Routingr.DurDays + AddTime(Routingr.DurTime,TimeToMinutes(StdOperationr.DurTime),Routingr.DurTime);
    end;
  end;
  return;
end;