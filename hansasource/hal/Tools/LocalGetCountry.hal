external procedure GetCountryFromExternalIP(var string,var string);

global
function string 255 LocalGetCountry()
begin
  Integer stat;
  string 255 country,externalip;

  stat = CallCloud("GETCOUNTRYFROMEXTIP").GetCountryFromExternalIP(country,externalip);
  //stat = CallService("127.0.0.1:1081").GetCountryFromExternalIP(country,externalip);
  
  LocalGetCountry = country;
  
  /*
  if (stat==kCallServiceOK) then begin
    Trace("got country",externalip & "/" & country);
  end else begin
    Trace("","failed to get country");
  end;
  */
  
end;
