global
function LongInt AlarmVcRecordDefaults(var record AlarmVc Alarmr,record AlarmVc Alarm2r,LongInt long3,LongInt long4)
begin
  LongInt res;
  
  Alarmr.TransDate = CurrentDate;
  Alarmr.TransTime = CurrentTime;
  Alarmr.ActSerNr = -1;
  Alarmr.CompNo = -1;
  if (SingleUserMode) then begin
    Alarmr.SerNr = NextSerNr("AlarmVc",Alarmr.TransDate,-1,false,"");
  end;
  Alarmr.TransDate = CurrentDate;
  AlarmVcRecordDefaults = res;  
  return;
end;

global
function LongInt AlarmVcRecordDuplicate(var record AlarmVc Alarmr,record AlarmVc Alarm2r,LongInt long3,LongInt long4)
begin
  LongInt res;
  
  Alarmr.TransDate = CurrentDate;
  Alarmr.TransTime = CurrentTime;
  Alarmr.ActSerNr = -1;
  Alarmr.CompNo = -1;
  if (SingleUserMode) then begin
    Alarmr.SerNr = NextSerNr("AlarmVc",Alarmr.TransDate,-1,false,"");
  end;
  AlarmVcRecordDuplicate = res;  
  return;
end;

global
function LongInt AlarmVcRecordCheck(var record AlarmVc Alarmr,record AlarmVc Alarm2r,LongInt long3,LongInt long4)
begin
  LongInt res;
  
  res = 0;
  if (Alarmr.SerNr<=0) then begin
    Alarmr.SerNr = NextSerNr("AlarmVc",Alarmr.TransDate,-1,false,"");
  end;
  if (blank(Alarmr.TransDate)) then begin
    RecordCheckError(1058,"",-1,"TransDate");      
    res = -1; 
    goto LAlarmVcRecordCheck;
  end;
LAlarmVcRecordCheck:;
  AlarmVcRecordCheck = res;  
  return;
end;

global
function LongInt AlarmVcRecordInIndex(record AlarmVc Alarmr,string indexname)
begin
  LongInt res;
  
  res = 1;
  if (Alarmr.OKFlag!=0) then begin 
    if (indexname=="ActDate")  then begin res = 0; end;
  end;
  AlarmVcRecordInIndex = res;
  return;
end;

global
function LongInt AlarmVcRecordSaveAfter(var record AlarmVc Alarmr,record AlarmVc Alarm2r,LongInt long3,LongInt long4)
begin
  LongInt res;

  if (Alarmr.OKFlag==0) then begin
    SetNextAlarmTaskFlag(true);
  end;
  AlarmVcRecordSaveAfter = res;  
  return;
end;

global
function LongInt AlarmVcRecordUpdateAfter(var record AlarmVc Alarmr,record AlarmVc Alarm2r,LongInt long3,LongInt long4)
begin
  LongInt res;

  if (Alarmr.OKFlag==0) then begin
    SetNextAlarmTaskFlag(true);
  end;
  AlarmVcRecordUpdateAfter = res;  
  return;
end;