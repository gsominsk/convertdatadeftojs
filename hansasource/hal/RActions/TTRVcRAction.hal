global
function LongInt TTRVcRecordDefaults(var record TTRVc TTRr,record TTRVc TTR2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;

  TTRVcRecordDefaults = res; 
  RETURN;
END;

global
function LongInt TTRVcRecordDuplicate(var record TTRVc TTRr,record TTRVc TTR2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;

  TTRVcRecordDuplicate = res; 
  RETURN;
END;

global
function LongInt TTRVcRecordRemoveTest(var record TTRVc TTRr,record TTRVc TTR2r,LongInt long3,LongInt globalf)
BEGIN
  LongInt res;
  record DBLockBlock DBLockRec;

  res = 1;
  BlockLoad(DBLockRec);
  if (TTRr.TransDate>DBLockRec.DeleteBeforeDate) then begin
    if (long3>0) then begin
      MessageBox(1560,"");
    end;
    res = 0;
    goto LTTRVcRecordRemoveTest;
  end;
LTTRVcRecordRemoveTest:;
  TTRVcRecordRemoveTest = res; 
  RETURN;
END;

global
function LongInt TTRVcRecordCheck(var record TTRVc TTRr,record TTRVc TTR2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  record TAccVc TAccr;
  record TRVc TRr;

  res = 0;
  if (TTRr.SerNr<=0) then begin
    RecordCheckError(1058,"",-1,"SerNr");      
    res = -1; 
    goto LTTRVcRecordCheck;
  end;  
  if (blankdate(TTRr.TransDate)) then begin
    RecordCheckError(1058,"",-1,"TransDate");      
    res = -1; 
    goto LTTRVcRecordCheck;
  end;    
  TAccr.AccNumber = TTRr.AccNumber; 
  if (ReadFirstMain(TAccr,1,true)==false) then begin
    RecordCheckError(1290,"",-1,"AccNumber");      
    res = -1; 
    goto LTTRVcRecordCheck;
  end;
  if (TTRr.TRNumber>0) then begin
    TRr.Number = TTRr.TRNumber;
    TRr.IntYc = TTRr.TRIntYc;
    if (ReadFirstMain(TRr,2,true)==false) then begin
      RecordCheckError(1290,"",-1,"TRNumber");      
      res = -1; 
      goto LTTRVcRecordCheck;
    end;
  end;
  
LTTRVcRecordCheck:; 
  TTRVcRecordCheck = res;
  RETURN;
END;

global
function LongInt TTRVcRecordInvalidateTest(var record TTRVc TTRr,record TTRVc TTR2r,LongInt long3,LongInt long4)
begin
  LongInt res;
  
  res = 1;
  if (UserCanAction("TTRInvalid",true)==false) then begin
    res = 0;
    MessageBox(34500,"");
    goto LTTRVcRecordInvalidateTest;
  end;
  if (TTRr.Invalid!=0) then begin
    res = 0;
    goto LTTRVcRecordInvalidateTest;
  end;
  TTRr.Invalid = 1;
LTTRVcRecordInvalidateTest:;
  TTRVcRecordInvalidateTest = res;  
  return;
end;
