global
updating function LongInt JobPriceVcRecordUpdateClient(LongInt wn,var record JobPriceVc JobPricer,record JobPriceVc JobPricer,LongInt long3,LongInt long4)
begin
  LongInt mwn,res;
  record JobVc Jobr;

  //Force an update of the current record in JobDClass to make sure the job totals are updated.
  //This happens in 'JobVcRecordSave' and 'JobVcRecordUpdate' where JobSumup is called.
  
  mwn = StringToInt(GetWindowString(wn,"MotherJobDClassWn"));
  if (WindowValid(mwn) and (GetWindowClass(mwn)=="JobDClass")) then begin
    GetWIndowRecord(mwn,Jobr)
    PutWIndowRecord(mwn,Jobr)
//    SetWindowState(mwn,Rs_Update);
    WindowDoOK(mwn,0);    
  end;
  JobPriceVcRecordUpdateClient = res;
  return;
end;