
global
updating function LongInt SLAccBlockCheck(var record SLAccBlock SLAccr,record SLAccBlock SLAcc2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  Integer i,j;
  Integer rwcnt;
  record AccVc Accr;
  row SLAccBlock SLAccrw;
  string 255 tstr;

  res = 0;     
  rwcnt = MatRowCnt(SLAccr);
  for (i=0; i<rwcnt;i=i+1) begin
    MatRowGet(SLAccr,i,SLAccrw);
    if (nonblank(SLAccrw.AccNumber)) then begin
      Accr.AccNumber = SLAccrw.AccNumber;
      if (ReadFirstMain(Accr,1,true)==false) then begin
        RecordCheckError(1007,SLAccrw.AccNumber,i,"AccNumber");      
        res = -1;
        goto LSLAccBlockCheck;
      end;
    end;
  end;
LSLAccBlockCheck:;
  SLAccBlockCheck = res;
  RETURN;
END;
