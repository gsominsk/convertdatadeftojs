external procedure NextM4Number(string,var string);

global
function LongInt VARMasksVcRecordCheck(var record VARMasksVc VARMasksr,record VARMasksVc VARMasks2r,LongInt stat,LongInt long4)
begin
  LongInt res;
  string 255 tstr;
  
  res = 0;
  if blank(VARMasksr.Code) then begin
    RecordCheckError(1959,"",-1,"Code");
    res = -1;
    goto LIVARMasksVcRecordCheck;
  end;  
  if blank(VARMasksr.Masks) then begin
    RecordCheckError(1959,"",-1,"Masks");
    res = -1;
    goto LIVARMasksVcRecordCheck;
  end;  
LIVARMasksVcRecordCheck:;
  VARMasksVcRecordCheck = res;
  return;
end;

global
updating function LongInt VARMasksVcRecordImport(var record VARMasksVc VARMasksr,record VARMasksVc VARMasks2r,LongInt long3,LongInt long4)
begin
  LongInt res;
  transaction string 255 gVVARMasksCodeonImport;
  
  if (blank(VARMasksr.Code)) then begin
    if (blank(gVVARMasksCodeonImport)) then begin
      VARMasksr.Code = "1";
    end else begin
      NextM4Number(gVVARMasksCodeonImport,VARMasksr.Code);
    end;
    gVVARMasksCodeonImport = VARMasksr.Code;
//    FixRLinks(); !!!
  end;
  VARMasksVcRecordImport = res;
  return;
end;
