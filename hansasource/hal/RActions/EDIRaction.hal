external function Date ConvertPlanShipString(string);
external procedure GetCurUser(var record UserVc);

global
function LongInt EDIIVVcRecordDefaults(var record EDIIVVc EDIIVr,record EDIIVVc EDIIVVc2r,LongInt long3,LongInt long4)
begin
  record UserVc USr;
  LongInt res;

  EDIIVr.SerNr = -1;
  EDIIVr.TransDate = CurrentDate;
  GetCurUser(USr);
  EDIIVr.Prntdf = 0;
  EDIIVr.ExportFlag = 0;
  EDIIVr.OKFlag = 0;
  EDIIVr.Invalid = 0;
  EDIIVr.DiscSum = BlankVal;
  EDIIVr.DiscPerc = BlankVal;
  EDIIVr.TotGP = BlankVal;
  if (SingleUserMode) then begin
    EDIIVr.SerNr = NextSerNr("EDIIVVc",EDIIVr.TransDate,-1,false,"");
  end;
  EDIIVVcRecordDefaults = res;
  RETURN;
END;

global
function LongInt EDIIVVcRecordRemoveTest(var record EDIIVVc EDIORr,record EDIIVVc EDIOR2r,LongInt long3,LongInt long4)
BEGIN
  LongInt res;

  EDIIVVcRecordRemoveTest = res; 
  RETURN;
END;

global
function LongInt EDIORVcRecordDefaults(var record EDIORVc EDIORr,record EDIORVc EDIORVc2r,LongInt long3,LongInt long4)
begin
  record UserVc USr;
  LongInt res;
  Time t;

  EDIORr.SerNr = -1;
  EDIORr.ORSerNr = -1;
  EDIORr.OrdDate = CurrentDate;
  GetCurUser(USr);
  EDIORr.CustCat = "";
  EDIORr.Prntdf = 0;
  EDIORr.ExportFlag = 0;
  EDIORr.InvFlag = 0;
  EDIORr.Closed = 0;
  EDIORr.ShipFlag = 0;
  EDIORr.DiscSum = BlankVal;
  EDIORr.DiscPerc = BlankVal;
  EDIORr.TotGP = BlankVal;
  EDIORr.Probability = BlankVal;
  EDIORr.CreateTime = t;
  if (SingleUserMode) then begin
    EDIORr.SerNr = NextSerNr("EDIORVc",EDIORr.OrdDate,-1,false,"");
  end;
  EDIORVcRecordDefaults = res;
  RETURN;
END;

global
function LongInt EDIORVcRecordRemoveTest(var record EDIORVc EDIORr,record EDIORVc EDIOR2r,LongInt long3,LongInt long4)
BEGIN
  LongInt res;

  EDIORVcRecordRemoveTest = res; 
  RETURN;
END;

global
function LongInt EDIORVcRecordImport(var record EDIORVc EDIORr,record EDIORVc EDIOR2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;

  if (blankdate(EDIORr.PlanShipDate)) then begin
    EDIORr.PlanShipDate = ConvertPlanShipString(EDIORr.PlanShip);
  end;
  EDIORVcRecordImport = res;
  RETURN;
END;