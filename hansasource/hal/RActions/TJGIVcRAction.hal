global
function LongInt TJGIVcRecordCheck(var record TJGIVc TJGIr,record TJGIVc TJGI2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  Integer insertmode;
  record INVc INr;
  record EGVc EGr;
  record TimeClassVc TimeClassr;
  row TJGIVc TJGIrw;
  Integer i,rwcnt;

  res = 0;     
  insertmode = 1;
  if (blank(TJGIr.Code)) then begin
    RecordCheckError(1058,TJGIr.Code,-1,"Code");      
    res = -1; 
    goto LTJGIVcRecordCheck;
  end;
  EGr.Code = TJGIr.Code;
  if (ReadFirstMain(EGr,1,true)==false) then begin
    RecordCheckError(1290,"",-1,"Code");  
    res = -1;
    goto LTJGIVcRecordCheck;
  end;  
  rwcnt = MatRowCnt(TJGIr);
  for (i=0;i<rwcnt;i=i+1) begin
    MatRowGet(TJGIr,i,TJGIrw);
    if (nonblank(TJGIrw.ItemCode)) then begin 
      INr.Code = TJGIrw.ItemCode;
      if (ReadFirstMain(INr,1,true)==false) then begin
        RecordCheckError(1233,"",i,"EMGroup");  
        res = -1;
        goto LTJGIVcRecordCheck;
      end; 
    end;
    if (nonblank(TJGIrw.TimeClass)) then begin 
      TimeClassr.Code = TJGIrw.TimeClass;
      if (ReadFirstMain(TimeClassr,1,true)==false) then begin
        RecordCheckError(1290,"",i,"TimeClass");  
        res = -1;
        goto LTJGIVcRecordCheck;
      end;  
    end;
  end;
LTJGIVcRecordCheck:;  
  TJGIVcRecordCheck = res;  
  RETURN;
END;