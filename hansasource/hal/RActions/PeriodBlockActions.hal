global
function LongInt PeriodBlockCheck(record PeriodBlock Perb,record PeriodBlock Per2b,LongInt stat,LongInt long4)
begin
  LongInt res;
  Integer i,rwcnt;
  row PeriodBlock Perbrw;
  
  res = 0;
  rwcnt = MatRowCnt(Perb);
  for (i=0; i<rwcnt;i=i+1) begin
    MatRowGet(Perb,i,Perbrw);
    if (Perbrw.FromDate>Perbrw.ToDate) then begin
      RecordCheckError(1142," " & Perbrw.ToDate,i,"ToDate");   
      res = -1;
      goto LPeriodBlockCheck;    
    end;    
  end;  
LPeriodBlockCheck:;  
  PeriodBlockCheck = res;
  return;
end;

