external procedure TargTimeSumup(record TargTimeVc);
external function Integer CheckUsers(string,string,var string,Boolean);

global
updating function LongInt TargTimeVcRecordCheck(record TargTimeVc TargTimer,record TargTimeVc TargTime2r,LongInt stat,LongInt check)
BEGIN
  LongInt res;
  Integer i,rwcnt;
  Boolean testf,gentrans,unokf;
  Integer insertmode,updatemode;
  Integer errstr;
  string 200 tstr;
  
  res = 0;
  insertmode = 1;//Rs_insert
  updatemode = 2;//Rs_update
  if (blank(TargTimer.Person)) then begin
    RecordCheckError(1058,"",-1,"Person");      
    res = -1;
    goto LTargTimeVcRecordCheck;
  end;
  errstr = CheckUsers(TargTimer.Person,"",tstr,false);  
  if (errstr!=0) then begin
    RecordCheckError(errstr,tstr,-1,"Person");      
    res = -1;
    goto LTargTimeVcRecordCheck;
  end;
LTargTimeVcRecordCheck:;  
  TargTimeVcRecordCheck = res;
  RETURN;
END;

global
function LongInt TargTimeVcRecordImport(var record TargTimeVc TargTimer,record TargTimeVc TargTime2r,LongInt stat,LongInt long4)
begin
  LongInt res;

  if (TargTimer.Total==0) then begin
    TargTimeSumup(TargTimer);
  end;
  TargTimeVcRecordImport = res;
  return;
end;
