
global 
updating function LongInt MachineHoursVcRecordCheck(var record MachineHoursVc MHr,record MachineHoursVc MH2r,LongInt stat,LongInt check)
begin
  LongInt rwcnt,i;
  record MachineHoursVc tMHr;
  record MachineGroupsBlock MGb;
  row MachineGroupsBlock MBGrw;
  LongInt res;
  Boolean found;

  BlockLoad(MGb);

  res = 0;
  
  if (MHr.MonEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"MonEnd");
    goto out;
  end;
  if (MHr.TueEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"TueEnd");
    goto out;
  end;
  if (MHr.WedEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"WedEnd");
    goto out;
  end;
  if (MHr.ThuEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"ThuEnd");
    goto out;
  end;
  if (MHr.FriEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"FriEnd");
    goto out;
  end;
  if (MHr.SatEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"SatEnd");
    goto out;
  end;
  if (MHr.SunEnd>24.00) then begin
    res = -1;
    RecordCheckError(1008,"",-1,"SunEnd");
    goto out;
  end;
  tMHr.Code = MHr.Code;
  if (ReadFirstKey("Code",tMHr,1,true)) then begin
    if (tMHr.SerNr!=Mhr.SerNr) then begin
      res = -1;
      RecordCheckError(1547,"",-1,"Code");
      goto out;
    end;
  end;
  if (blank(MHr.InventoryNr)) then begin
    tMHr.InventoryNr = MHr.InventoryNr;
    found = true;
    while (LoopKey("InventoryNr",tMHr,1,found)) begin
      if (tMHr.SerNr<>Mhr.SerNr and tMHr.Code==MHr.Code) then begin
        res = -1;
        RecordCheckError(1547,"",-1,"InventoryNr");
        goto out;
      end;
    end;
  end;
  
  if (MHr.SerNr<=0) then begin
    MHr.SerNr = NextSerNr("MachineHoursVc",CurrentDate,-1,false,"");
  end;
  res = -1;
  rwcnt = MatRowCnt(MGb);
  for (i = 0; i<rwcnt; i = i + 1) begin
    MatRowGet(MGb,i,MBGrw);
    if (MBGrw.Code==MHr.Code) then begin
      res = 0;
      goto out;
    end;
  end;
  RecordCheckError(11730,"",-1,"Code");

out:;
  MachineHoursVcRecordCheck = res;
  return;
end;

global 
function LongInt MachineHoursVcRecordDuplicate(var record MachineHoursVc MHr,record MachineHoursVc MH2r,LongInt stat,LongInt check)
begin
  longint res;
  
  MHr.SerNr =-1;
  MachineHoursVcRecordDuplicate = res;
  return;
end;