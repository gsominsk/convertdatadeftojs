global
function LongInt RentChrgVcRecordSave(var record RentChrgVc RentChrgr,record RentChrgVc RentChrg2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
    
  if (RentChrgr.SerNr<=0) then begin
    RentChrgr.SerNr = NextSerNr("RentChrgVc",RentChrgr.TransDate,-1,false,"");
  end;  
  RentChrgVcRecordSave = res;
  RETURN;
END;

global
function LongInt RentChrgVcRecordCheck(var record RentChrgVc RentChrgr,record RentChrgVc RentChrg2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  record AgreementVc Agreementr;

  res = 0;
  Agreementr.SerNr = RentChrgr.AgreementNr;
  if (ReadFirstMain(Agreementr,1,true)==false) then begin
    RecordCheckError(2161,"",-1,"TransDate");
    res = -1;
    goto LRentChrgVcRecordCheck;
  end;
  if ((Agreementr.OKFlag<>1) or (Agreementr.AgreeStatus>1)) then begin
    if (RentChrgr.PONumber<0) then begin
      RecordCheckError(2161,"",-1,"TransDate");
      res = -1;
      goto LRentChrgVcRecordCheck;
    end;
  end;
  if ((blank(RentChrgr.Item)) and (blank(RentChrgr.Spec)) and (RentChrgr.Sum==0)) then begin
    RecordCheckError(1854,"",-1,"Sum");
    res = -1;
    goto LRentChrgVcRecordCheck;
  end;
LRentChrgVcRecordCheck:; 
  RentChrgVcRecordCheck = res;
  RETURN;
END;
