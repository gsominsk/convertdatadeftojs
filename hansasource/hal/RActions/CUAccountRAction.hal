
procedure UpdateConnectedAccounts(record CUAccountVc CUAccountr)
begin
  return;
end;

global
function LongInt CUAccountVcRecordDefaults(var record CUAccountVc CUAccountr,record CUAccountVc CUAccount2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  val blval;

  CUAccountr.RegDate = CurrentDate;
  CUAccountVcRecordDefaults = res; 
  RETURN;
END;

global
function LongInt CUAccountVcRecordDuplicate(var record CUAccountVc CUAccountr,record CUAccountVc CUAccount2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  Date bldat;

  CUAccountr.RegDate = CurrentDate;
  CUAccountVcRecordDuplicate = res; 
  RETURN;
END;

global
updating function LongInt CUAccountVcRecordSaveAfter(var record CUAccountVc CUAccountr,record CUAccountVc CUAccount2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;

  UpdateConnectedAccounts(CUAccountr);
  CUAccountVcRecordSaveAfter = res;
  RETURN;
END;

global
updating function LongInt CUAccountVcRecordUpdateAfter(var record CUAccountVc CUAccountr,record CUAccountVc CUAccount2r,LongInt stat,LongInt long4)
BEGIN
  LongInt res;
  
  UpdateConnectedAccounts(CUAccountr);
  CUAccountVcRecordUpdateAfter = res;
  RETURN;
END;

global
updating function LongInt CUAccountVcRecordCheck(var record CUAccountVc CUAccountr,record CUAccountVc CUAccount2r,LongInt stat,LongInt long4)
BEGIN
  record CUVc CUr;
  LongInt res;
  
  res = 0;     
  if (blank(CUAccountr.CustCode)) then begin
    RecordCheckError(1125,"",-1,"CustCode");      
    res = -1; 
    goto LCUAccountVcRecordCheck;
  end;
  CUr.Code = CUAccountr.CustCode;
  if (ReadFirstMain(CUr,1,true)==false) then begin
    RecordCheckError(1120,CUAccountr.CustCode,-1,"CustCode");      
    res = -1; 
    goto LCUAccountVcRecordCheck;
  end;
  if (CUAccountr.ThisAccount==0) then begin
    if (nonblank(CUAccountr.InvToCust)) then begin
      RecordCheckError(2010,"",-1,"InvToCust");      
      res = -1; 
      goto LCUAccountVcRecordCheck;
    end;
  end else begin
    if (blank(CUAccountr.InvToCust)) then begin
      RecordCheckError(1125,"",-1,"InvToCust");      
      res = -1; 
      goto LCUAccountVcRecordCheck;
    end;
  end;
LCUAccountVcRecordCheck:;
  CUAccountVcRecordCheck = res;
  RETURN;
END;
