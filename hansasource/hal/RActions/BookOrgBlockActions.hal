external function Integer CheckObjs(string,string,var string);

global
function LongInt BookOrgBlockCheck(var record BookOrgBlock BookOrgr,record BookOrgBlock BookOrg2r,LongInt stat,LongInt long4)
begin
  row BookOrgBlock BookOrgrw;
  LongInt res;
  integer i,rowcnt,errcode;
  string 255 errstr;

  rowcnt = MatRowCnt(BookOrgr);
  for (i=0;i<rowcnt;i=i+1) begin
    MatRowGet(BookOrgr,i,BookOrgrw);
    if blank(BookOrgrw.Code) then begin
       RecordCheckError(1959,"",i,"Code");
       res = -1;
       goto LBookOrgrw;
    end;
    errcode = CheckObjs("",BookOrgrw.Objects,errstr);
    if (errcode!=0) then begin
      RecordCheckError(errcode,errstr,i,"Objects");      
      res = -1; 
      goto LBookOrgrw;
    end;
  end;
LBookOrgrw:;
  return;
end;