function Boolean TableExists(string table)
begin
  Boolean res;
  record NeighbourHoodVc NHr;

  res = true;
  if (nonblank(table)) then begin
    NHr.Table = table;
    res = ReadFirstMain(NHr,1,true);
  end;
  TableExists = res;
  return;
end;

global
function LongInt TableLayoutVcRecordCheck(var record TableLayoutVc TLr,record TableLayoutVc TL2r,LongInt long3,LongInt long4)
begin
  LongInt res;
  record CUVc CUr;
  record TableLayoutVc lTLr;
  Integer i,rwcnt;
  row TableLayoutVc TLrw;
  Boolean found;
  
  res= 0;
  if (blank(TLr.Code)) then begin
    RecordCheckError(1058,"",-1,"Code");      
    res = -1; 
    goto LTableLayoutVcRecordCheck;
  end;
  if (TLr.Horizontal<=0) then begin
    RecordCheckError(1058,"",-1,"Horizontal");      
    res = -1; 
    goto LTableLayoutVcRecordCheck;
  end;
  if (TLr.Vertical<=0) then begin
    RecordCheckError(1058,"",-1,"Vertical");      
    res = -1; 
    goto LTableLayoutVcRecordCheck;
  end;
  if (nonblank(TLr.BranchID)) then begin
    CUr.Code = TLr.BranchID;
    if (ReadFirstMain(CUr,1,true)==false) then begin
      RecordCheckError(1272,"",-1,"BranchID");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
  end;
  lTLr.BranchID = TLr.BranchID;
  while (LoopKey("BranchID",lTLr,1,found)) begin
    if (lTLr.BranchID!=TLr.BranchID) then begin found = false; end;
    if (found) then begin
      if (lTLr.Code!=TLr.Code) then begin
        RecordCheckError(1545,"",-1,"BranchID");      
        res = -1; 
        goto LTableLayoutVcRecordCheck;
      end;
    end;
  end;
  
  rwcnt = MatRowCnt(TLr);
  for (i=0;i<rwcnt;i=i+1) begin
    MatRowGet(TLr,i,TLrw);
    if (TableExists(TLrw.Table0)==false) then begin
      RecordCheckError(1290,"",i,"Table0");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table1)==false) then begin
      RecordCheckError(1290,"",i,"Table1");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table2)==false) then begin
      RecordCheckError(1290,"",i,"Table2");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table3)==false) then begin
      RecordCheckError(1290,"",i,"Table3");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table4)==false) then begin
      RecordCheckError(1290,"",i,"Table4");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table5)==false) then begin
      RecordCheckError(1290,"",i,"Table5");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table6)==false) then begin
      RecordCheckError(1290,"",i,"Table6");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table7)==false) then begin
      RecordCheckError(1290,"",i,"Table7");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table8)==false) then begin
      RecordCheckError(1290,"",i,"Table8");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
    if (TableExists(TLrw.Table9)==false) then begin
      RecordCheckError(1290,"",i,"Table9");      
      res = -1; 
      goto LTableLayoutVcRecordCheck;
    end;
  end;
LTableLayoutVcRecordCheck:;
  TableLayoutVcRecordCheck = res;  
  RETURN;
END;
